<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memphis 901 Buyer — Wholesale Device Prices</title>
<meta name="description" content="Memphis 901 Buyer by Sapphire Wholesale LLC — live wholesale buy prices for iPhones, iPads, MacBooks, Samsung, Apple Watch & AirPods. Updated weekly.">
<meta name="keywords" content="wholesale phones, buy iPhones, sell iPhone Memphis, Sapphire Wholesale, Memphis 901 Buyer, wholesale pricing, used phones Memphis">
<meta name="author" content="Sapphire Wholesale LLC">
<meta name="theme-color" content="#0f172a">

<!-- Open Graph for link sharing -->
<meta property="og:title" content="Memphis 901 Buyer — Wholesale Device Prices">
<meta property="og:description" content="Live wholesale buy prices for iPhones, iPads, MacBooks, Samsung, Apple Watch & AirPods. Updated weekly by Sapphire Wholesale LLC.">
<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Memphis 901 Buyer — Wholesale Device Prices">
<meta name="twitter:description" content="Live wholesale buy prices for iPhones, iPads, MacBooks, Samsung & more. Sapphire Wholesale LLC, Memphis TN.">

<!-- Favicon (inline SVG as data URI) -->
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 34 52'%3E%3Crect x='2' y='2' width='30' height='48' rx='5' stroke='%23c8a84b' stroke-width='2.2' fill='%230f172a'/%3E%3Crect x='11' y='7.5' width='12' height='2.5' rx='1.2' fill='%23c8a84b'/%3E%3Cline x1='17' y1='17' x2='17' y2='37' stroke='%235ba3ff' stroke-width='2' stroke-linecap='round'/%3E%3Cpath d='M22 20.5C22 18.5 20 17 17 17C14 17 12 18.8 12 21C12 23.2 14 24 17 24.5C20 25 22 26 22 28.5C22 31 20 33 17 33C14 33 12 31.5 12 29.5' stroke='%235ba3ff' stroke-width='2' stroke-linecap='round' fill='none'/%3E%3C/svg%3E">

<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root{--bg:#1e2a3a;--bg2:#0f172a;--bg3:#1e293b;--blue:#3b82f6;--blue2:#60a5fa;--blue3:#93c5fd;--gold:#f59e0b;--gold2:#fbbf24;--white:#f1f5f9;--dim:#64748b;--dim2:#94a3b8;--border:rgba(255,255,255,.08);--hover:rgba(59,130,246,.1);--radius:14px;}
*{box-sizing:border-box;margin:0;padding:0}
.pair-row{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:18px}
.pair-row .card-full{margin-bottom:0}
body{font-family:'DM Sans',sans-serif;background:linear-gradient(160deg,#0f172a 0%,#1e2a3a 50%,#0f1f35 100%);background-attachment:fixed;color:var(--white);min-height:100vh;font-size:85%}
header{background:linear-gradient(180deg,#020817,#0f172a);border-bottom:1px solid rgba(59,130,246,.15);position:sticky;top:0;z-index:200;box-shadow:0 4px 30px rgba(0,0,0,.6)}
.hdr{max-width:1480px;margin:0 auto;padding:0 28px;display:flex;align-items:center;justify-content:space-between;height:66px;gap:16px}
.brand{display:flex;align-items:center;gap:12px;flex-shrink:0}
.gem{width:24px;height:37px}
.brand h1{font-family:'Bebas Neue',sans-serif;font-size:1.6rem;font-weight:400;letter-spacing:.08em;line-height:1}
.brand h1 .m901{color:#ffffff}
.brand h1 .buyer{color:#4ade80}
.brand p{font-size:.62rem;color:var(--dim);letter-spacing:.2em;text-transform:uppercase;margin-top:2px}
.hdr-right{display:flex;align-items:center;gap:8px}
.upd-time{font-size:.65rem;color:var(--dim);text-align:right;line-height:1.4}
.upd-time strong{color:var(--blue3);display:block;font-size:.7rem}

.spin{display:inline-block}

@keyframes rot{to{transform:rotate(360deg)}}
.cattabs{background:rgba(2,8,23,.8);backdrop-filter:blur(12px);border-bottom:1px solid rgba(59,130,246,.12);padding:0 28px;overflow-x:auto;scrollbar-width:none}
.cattabs::-webkit-scrollbar{display:none}
.ctabs-inner{max-width:1480px;margin:0 auto;display:flex}
.ctab{padding:14px 22px;cursor:pointer;font-size:.83rem;font-weight:600;color:var(--dim);border-bottom:3px solid transparent;transition:all .18s;white-space:nowrap;display:flex;align-items:center;gap:7px}
.ctab:hover{color:var(--white)}.ctab.active{color:#fbbf24;border-bottom-color:#f59e0b}
.main{max-width:1480px;margin:0 auto;padding:24px 28px 60px}
.section{display:none}.section.active{display:block}
.subtabs{display:flex;gap:8px;margin-bottom:20px;flex-wrap:wrap;justify-content:center}
.stab{padding:7px 20px;border-radius:20px;cursor:pointer;font-size:.79rem;font-weight:600;background:rgba(255,255,255,.04);color:var(--dim2);border:1.5px solid rgba(255,255,255,.12);transition:all .25s}
.stab:hover{border-color:rgba(59,130,246,.5);color:#93c5fd;background:rgba(59,130,246,.08)}.stab.active{background:linear-gradient(135deg,#1d4ed8,#3b82f6);color:#fff;border-color:#3b82f6}
.stab.dimmed{opacity:.4;border-color:rgba(255,255,255,.08);color:rgba(255,255,255,.35)}
.iph-filters{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:24px;max-width:460px;margin-left:auto;margin-right:auto}
.iph-filters .stab{display:flex;align-items:center;justify-content:center;gap:6px;height:36px;font-size:.72rem;border-radius:20px;padding:0 16px;white-space:nowrap}
.iph-filters .stab svg{flex-shrink:0;width:13px;height:13px}


.subsec{display:none}.subsec.active{display:block}
.info{background:rgba(200,168,75,.07);border:1px solid rgba(200,168,75,.17);border-radius:10px;padding:12px 16px;margin-bottom:18px;font-size:.79rem;color:rgba(238,244,255,.72);display:flex;gap:10px;align-items:flex-start;line-height:1.65}
.info-i{flex-shrink:0;font-size:1rem;margin-top:1px}


.model-block{margin-bottom:26px}
.model-label{font-size:.76rem;font-weight:700;text-transform:uppercase;letter-spacing:.14em;color:var(--dim2);margin-bottom:9px;padding-left:2px}
.two-col{display:grid;grid-template-columns:1fr 1fr;gap:14px}
@media(max-width:860px){.two-col{grid-template-columns:1fr}}
.card{background:var(--bg2);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;transition:border-color .2s}
.card:hover{border-color:rgba(27,95,199,.28)}
.card-hdr{padding:11px 18px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--border)}
.card-hdr.u-hdr{background:linear-gradient(135deg,rgba(34,197,94,.1),rgba(16,185,129,.06))}
.card-hdr.l-hdr{background:linear-gradient(135deg,rgba(239,68,68,.12),rgba(220,38,38,.07))}
.card-hdr h4{font-size:.85rem;font-weight:700;color:var(--white)}
.card-note{padding:5px 18px;font-size:.69rem;color:var(--dim2);background:rgba(0,0,0,.15);border-bottom:1px solid var(--border);font-style:italic}
.badge{display:inline-flex;align-items:center;padding:3px 9px;border-radius:7px;font-size:.65rem;font-weight:700;letter-spacing:.06em;text-transform:uppercase}
.b-ul{background:rgba(34,197,94,.15);color:#4ade80;border:1px solid rgba(34,197,94,.3)}
.b-lk{background:rgba(239,68,68,.15);color:#fca5a5;border:1px solid rgba(239,68,68,.3)}
.b-wifi{background:rgba(14,165,233,.12);color:#7dd3fc}
.b-cell{background:rgba(139,92,246,.12);color:#c4b5fd}
.card-full{background:linear-gradient(135deg,#0f1e35 0%,#0d1829 100%);border:1px solid rgba(59,130,246,.18);border-radius:var(--radius);overflow:hidden;margin-bottom:18px;transition:all .22s;box-shadow:0 4px 20px rgba(0,0,0,.4)}
.card-full:hover{border-color:rgba(59,130,246,.35)}
.cfhdr{background:linear-gradient(135deg,rgba(59,130,246,.18) 0%,rgba(99,102,241,.12) 100%);padding:13px 20px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid rgba(59,130,246,.15)}
.cfhdr h3{font-size:.92rem;font-weight:700;color:#f1f5f9}
.tbl{width:100%;border-collapse:collapse}
.tbl th{padding:8px 16px;text-align:left;font-size:.67rem;font-weight:700;text-transform:uppercase;letter-spacing:.09em;color:#93c5fd;background:rgba(15,23,42,.6);border-bottom:1px solid rgba(59,130,246,.12)}
.tbl td{padding:10px 16px;font-size:.84rem;border-bottom:1px solid rgba(255,255,255,.04);vertical-align:middle}
.tbl tr:hover td{background:rgba(59,130,246,.06)}
.tbl tr:last-child td{border-bottom:none}
.tbl tr:hover td{background:var(--hover)}
.cap{font-weight:600;color:var(--blue3);font-size:.81rem}
.pr{font-weight:800;font-size:.9rem;color:#ffffff}
.pr2{font-weight:600;font-size:.87rem;color:#e2e8f0}
.nu{color:var(--dim);font-size:.77rem;font-style:italic}
.gp{display:inline-flex;align-items:center;padding:2px 8px;border-radius:7px;font-size:.67rem;font-weight:700;letter-spacing:.03em}
.g-hso{background:rgba(107,114,128,.06);color:rgba(160,165,170,.45);border:1px solid rgba(107,114,128,.08)}
.g-a{background:rgba(107,114,128,.06);color:rgba(160,165,170,.45);border:1px solid rgba(107,114,128,.08)}
.g-b{background:rgba(107,114,128,.06);color:rgba(160,165,170,.45);border:1px solid rgba(107,114,128,.08)}
.g-c{background:rgba(107,114,128,.06);color:rgba(160,165,170,.45);border:1px solid rgba(107,114,128,.08)}
.g-d{background:rgba(107,114,128,.06);color:rgba(160,165,170,.45);border:1px solid rgba(107,114,128,.08)}
.g-doa{background:rgba(107,114,128,.06);color:rgba(160,165,170,.45);border:1px solid rgba(107,114,128,.08)}
.cpill{display:inline-flex;align-items:center;padding:2px 8px;border-radius:7px;font-size:.68rem;font-weight:600}
.c-ul{background:rgba(34,197,94,.11);color:#4ade80}
.c-att{background:rgba(99,102,241,.11);color:#a5b4fc}
.c-lk{background:rgba(239,68,68,.09);color:#fca5a5}
#toast{position:fixed;bottom:24px;right:24px;background:var(--bg2);border:1px solid var(--blue);border-radius:10px;padding:12px 20px;font-size:.83rem;color:var(--white);box-shadow:0 8px 30px #0009;transform:translateY(60px);opacity:0;transition:all .3s;z-index:999;max-width:300px;pointer-events:none}
#toast.show{transform:translateY(0);opacity:1}
.tbl-wrap{overflow-x:auto;-webkit-overflow-scrolling:touch}
.tbl-wrap::-webkit-scrollbar{height:4px}
.tbl-wrap::-webkit-scrollbar-track{background:rgba(255,255,255,.03)}
.tbl-wrap::-webkit-scrollbar-thumb{background:var(--blue);border-radius:3px}
.ded-btn{width:100%;background:rgba(107,114,128,.06);border:1px solid rgba(107,114,128,.08);border-radius:0 0 var(--radius) var(--radius);color:rgba(160,165,170,.45);font-size:.73rem;font-weight:700;letter-spacing:.06em;text-transform:uppercase;padding:8px 16px;cursor:pointer;text-align:left;display:flex;align-items:center;justify-content:space-between;transition:background .18s}
.ded-btn:hover{background:rgba(107,114,128,.11)}
.ded-btn .ded-arrow{transition:transform .22s;font-size:.8rem}
.ded-btn.open .ded-arrow{transform:rotate(180deg)}
.ded-panel{display:none;padding:12px 16px 14px;background:rgba(107,114,128,.04);border-top:1px solid rgba(107,114,128,.08)}
.ded-panel.open{display:block}
.ded-grid{display:grid;grid-template-columns:1fr auto;gap:4px 16px}
.ded-label{font-size:.74rem;color:var(--dim2);padding:3px 0;border-bottom:1px solid rgba(255,255,255,.04)}
.ded-amt{font-size:.74rem;font-weight:700;color:#f87171;text-align:right;padding:3px 0;border-bottom:1px solid rgba(255,255,255,.04);white-space:nowrap}
.ded-note{font-size:.68rem;color:var(--dim);margin-top:8px;font-style:italic;line-height:1.5}

::-webkit-scrollbar{width:5px;height:5px}::-webkit-scrollbar-track{background:var(--bg)}::-webkit-scrollbar-thumb{background:var(--blue);border-radius:3px}

/* ── GLOBAL SEARCH BAR ── */
.search-wrap{max-width:1480px;margin:0 auto;padding:14px 28px 0}
.search-box{position:relative;max-width:500px;margin:0 auto}
.search-box input{width:100%;background:rgba(255,255,255,.06);border:1.5px solid rgba(255,255,255,.1);border-radius:12px;padding:11px 16px 11px 42px;color:#f1f5f9;font-family:'DM Sans',sans-serif;font-size:.85rem;outline:none;transition:border-color .2s,box-shadow .2s}
.search-box input:focus{border-color:var(--blue);box-shadow:0 0 0 3px rgba(59,130,246,.15)}
.search-box input::placeholder{color:var(--dim)}
.search-icon{position:absolute;left:14px;top:50%;transform:translateY(-50%);width:18px;height:18px;color:var(--dim);pointer-events:none}
.search-clear{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:rgba(255,255,255,.1);border:none;border-radius:50%;width:22px;height:22px;display:none;align-items:center;justify-content:center;cursor:pointer;color:var(--dim2);font-size:.75rem;transition:background .15s}
.search-clear:hover{background:rgba(255,255,255,.2)}
.search-clear.visible{display:flex}
.search-count{text-align:center;font-size:.72rem;color:var(--dim);margin-top:8px;min-height:18px}
.card-full.search-hidden,.card.search-hidden{display:none!important}
.model-block.search-hidden{display:none!important}
.search-no-results{text-align:center;padding:40px 20px;color:var(--dim2);font-size:.9rem}
.search-no-results svg{display:block;margin:0 auto 12px;opacity:.4}
.search-highlight{background:rgba(251,191,36,.25);color:#fbbf24;border-radius:3px;padding:0 2px}

/* ── BACK TO TOP BUTTON ── */
#btt{position:fixed;bottom:24px;left:24px;width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,#1b5fc7,#3b82f6);border:1.5px solid rgba(59,130,246,.5);color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;opacity:0;transform:translateY(20px);transition:all .3s;z-index:500;box-shadow:0 4px 20px rgba(0,0,0,.4)}
#btt.show{opacity:1;transform:translateY(0)}
#btt:hover{background:linear-gradient(135deg,#2563eb,#60a5fa);transform:translateY(-2px);box-shadow:0 6px 25px rgba(59,130,246,.3)}
#btt svg{width:20px;height:20px}


/* ── LAST UPDATED BADGE ── */
.upd-badge{display:inline-flex;align-items:center;gap:5px;background:rgba(34,197,94,.1);border:1px solid rgba(34,197,94,.25);border-radius:8px;padding:4px 10px;font-size:.65rem;color:#4ade80;font-weight:600;letter-spacing:.04em}
.upd-badge .pulse{width:6px;height:6px;border-radius:50%;background:#4ade80;animation:pulse-dot 2s ease-in-out infinite}
@keyframes pulse-dot{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.4;transform:scale(.7)}}

/* ── PRICE ESTIMATOR ── */
.estimator-tab{display:none}.estimator-tab.active{display:block}
.est-wrap{max-width:600px;margin:0 auto}
.est-card{background:linear-gradient(135deg,#0f1e35,#0d1829);border:1.5px solid rgba(59,130,246,.2);border-radius:16px;overflow:hidden;box-shadow:0 8px 40px rgba(0,0,0,.4)}
.est-header{background:linear-gradient(135deg,rgba(59,130,246,.2),rgba(139,92,246,.12));padding:20px 24px;text-align:center;border-bottom:1px solid rgba(59,130,246,.15)}
.est-header h2{font-family:'Bebas Neue',sans-serif;font-size:1.5rem;letter-spacing:.1em;color:#fff;margin-bottom:4px}
.est-header p{font-size:.75rem;color:var(--dim2)}
.est-body{padding:20px 24px}
.est-field{margin-bottom:16px}
.est-field label{display:block;font-size:.72rem;font-weight:700;text-transform:uppercase;letter-spacing:.1em;color:var(--dim2);margin-bottom:6px}
.est-select,.est-input{width:100%;background:rgba(255,255,255,.06);border:1.5px solid rgba(255,255,255,.1);border-radius:10px;padding:11px 14px;color:#f1f5f9;font-family:'DM Sans',sans-serif;font-size:.85rem;outline:none;transition:border-color .2s;-webkit-appearance:none;appearance:none}
.est-select:focus,.est-input:focus{border-color:var(--blue)}
.est-select{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%2394a3b8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;padding-right:32px}
.est-select option{background:#0f172a;color:#f1f5f9}
.est-result{background:rgba(251,191,36,.06);border:1.5px solid rgba(251,191,36,.2);border-radius:12px;padding:18px;text-align:center;margin-top:8px;display:none}
.est-result.visible{display:block}
.est-result-label{font-size:.72rem;color:var(--dim2);text-transform:uppercase;letter-spacing:.1em;margin-bottom:6px}
.est-result-price{font-family:'Bebas Neue',sans-serif;font-size:2.8rem;color:#fbbf24;line-height:1}
.est-result-note{font-size:.7rem;color:var(--dim);margin-top:8px}
.est-result-range{display:flex;justify-content:center;gap:24px;margin-top:12px}
.est-range-item{text-align:center}
.est-range-label{font-size:.62rem;color:var(--dim);text-transform:uppercase;letter-spacing:.08em}
.est-range-val{font-size:1rem;font-weight:800;margin-top:2px}

/* ── PRINT STYLES ── */
@media print{
  header,#agree-overlay,#adm-overlay,.cattabs,#btt,#toast,.search-wrap,.sell-bar,.iph-filters,.subtabs,.ded-btn,.ded-panel{display:none!important}
  body{background:#fff!important;color:#000!important;font-size:80%}
  .main{padding:10px!important;max-width:100%!important}
  .section{display:block!important;page-break-inside:avoid}
  .card-full{border:1px solid #ccc!important;background:#fff!important;box-shadow:none!important;margin-bottom:10px!important;page-break-inside:avoid}
  .cfhdr{background:#f0f0f0!important;border-bottom:1px solid #ccc!important}
  .cfhdr h3{color:#000!important}
  .tbl th{color:#333!important;background:#f5f5f5!important;border-bottom:1px solid #ccc!important}
  .tbl td{color:#000!important;border-bottom:1px solid #eee!important}
  .pr,.pr2{color:#000!important}
  .badge{border:1px solid #999!important;color:#333!important;background:#f0f0f0!important}
  .gp{border:1px solid #999!important;color:#333!important;background:#f0f0f0!important}
  .nu{color:#999!important}
  .cap{color:#000!important}
  @page{margin:0.5in}
}

/* ── IMPROVED MOBILE ── */
@media(max-width:600px){
  .hdr{padding:12px 14px;height:auto;flex-wrap:nowrap}
  .main{padding:14px 14px 40px}
  .cattabs{padding:0 14px}
  .search-wrap{padding:10px 14px 0}
  .tbl th{font-size:.6rem;padding:6px 8px}
  .tbl td{font-size:.76rem;padding:8px 8px}
  #btt{bottom:16px;left:16px;width:40px;height:40px}
  .est-result-price{font-size:2.2rem}
  .pair-row{grid-template-columns:1fr}
  .cfhdr{padding:10px 14px;flex-wrap:wrap;gap:6px}
  .cfhdr h3{font-size:.84rem}
  .info-hero{padding:18px 16px}
  .info-hero-title{font-size:1.5rem}
}
@media(max-width:380px){
  .tbl th{font-size:.55rem;padding:5px 5px;letter-spacing:.04em}
  .tbl td{font-size:.7rem;padding:6px 5px}
  .brand h1{font-size:1.3rem}
}


/* ── WELCOME BANNER ── */
.welcome-banner{background:linear-gradient(135deg,rgba(59,130,246,.12),rgba(139,92,246,.08));border:1px solid rgba(59,130,246,.2);border-radius:14px;padding:18px 24px;margin-bottom:20px;display:flex;align-items:center;gap:16px;animation:cardIn .5s ease-out}
.welcome-banner-icon{width:48px;height:48px;background:linear-gradient(135deg,#1b5fc7,#3b82f6);border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:1.4rem}
.welcome-banner-text h3{font-size:.95rem;font-weight:700;color:#f1f5f9;margin-bottom:3px}
.welcome-banner-text p{font-size:.78rem;color:var(--dim2);line-height:1.5}
.welcome-banner-close{background:none;border:none;color:var(--dim);cursor:pointer;font-size:1.1rem;padding:4px;margin-left:auto;flex-shrink:0;transition:color .15s}
.welcome-banner-close:hover{color:var(--white)}

/* ── CATEGORY HEADER ── */
.cat-header{text-align:center;margin-bottom:20px}
.cat-header h2{font-family:'Bebas Neue',sans-serif;font-size:1.6rem;letter-spacing:.1em;color:#f1f5f9}
.cat-header p{font-size:.75rem;color:var(--dim2);margin-top:2px}

/* ── IMPROVED SELL BUTTON ── */
.sell-btn{position:relative;overflow:hidden}
.sell-btn::after{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.15),transparent);transition:left .5s}
.sell-btn:hover::after{left:100%}

/* ── CATEGORY TABS ── */
.cattabs{position:relative;z-index:190}

/* ── SMOOTH SCROLL ── */
html{scroll-behavior:smooth}

/* ── TABLE SORT INDICATORS ── */
.tbl th.sortable{cursor:pointer;user-select:none;transition:color .15s}
.tbl th.sortable:hover{color:#fbbf24}
.tbl th.sortable::after{content:'';display:inline-block;margin-left:4px;opacity:.4}
.tbl th.sort-asc::after{content:'▲';opacity:.8}
.tbl th.sort-desc::after{content:'▼';opacity:.8}

/* ── SKELETON LOADING ── */
@keyframes shimmer{0%{background-position:-200px 0}100%{background-position:200px 0}}
.skeleton{background:linear-gradient(90deg,rgba(255,255,255,.04) 25%,rgba(255,255,255,.08) 50%,rgba(255,255,255,.04) 75%);background-size:200px 100%;animation:shimmer 1.5s infinite;border-radius:6px}

/* ── CARD ENTRANCE ANIMATION ── */
.card-full{animation:cardIn .35s ease-out both}
@keyframes cardIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}

/* ── AGREEMENT OVERLAY ── */
#agree-overlay{position:fixed;inset:0;background:rgba(2,6,14,.75);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);z-index:9999;display:flex;align-items:flex-end;justify-content:center}
#agree-modal{background:#070d1a;border:1px solid rgba(0,0,0,.2);border-bottom:none;border-radius:24px 24px 0 0;width:100%;max-width:500px;max-height:78vh;display:flex;flex-direction:column;overflow:hidden;box-shadow:0 -12px 50px rgba(0,0,0,.4);animation:slide-up .35s cubic-bezier(.32,1.2,.64,1)}
@keyframes slide-up{from{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}
#agree-handle{flex-shrink:0;display:flex;flex-direction:column;align-items:center;padding:12px 20px 0;background:#070d1a}
#agree-handle-bar{width:36px;height:4px;background:rgba(255,255,255,.15);border-radius:4px;margin-bottom:12px}
#agree-header{display:flex;align-items:center;gap:10px;width:100%;padding-bottom:12px;border-bottom:1px solid rgba(255,255,255,.06)}
#agree-icon{width:36px;height:36px;background:linear-gradient(135deg,#1b5fc7,#2e80f5);border-radius:10px;display:flex;align-items:center;justify-content:center;flex-shrink:0}
#agree-icon svg{width:18px;height:18px;stroke:#fff;fill:none;stroke-width:2.2;stroke-linecap:round;stroke-linejoin:round}
#agree-header-text{flex:1}
#agree-header-text h2{font-family:'Bebas Neue',sans-serif;font-size:1.05rem;letter-spacing:.08em;color:#fff;line-height:1}
#agree-header-text h2 span{color:#4ade80}
#agree-header-text p{font-size:.6rem;color:rgba(255,255,255,.32);letter-spacing:.12em;text-transform:uppercase;margin-top:1px}
#agree-scroll-hint{flex-shrink:0;margin:10px 20px 0;padding:7px 12px;background:rgba(91,163,255,.08);border:1px solid rgba(91,163,255,.15);border-radius:8px;display:flex;align-items:center;gap:7px;font-size:.67rem;color:var(--blue3);font-weight:600}
#agree-scroll-hint svg{width:13px;height:13px;stroke:currentColor;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;flex-shrink:0;animation:bob .9s ease-in-out infinite}
@keyframes bob{0%,100%{transform:translateY(0)}50%{transform:translateY(3px)}}
#agree-body{overflow-y:auto;padding:14px 20px 6px;flex:1;scrollbar-width:thin;scrollbar-color:rgba(27,95,199,.5) transparent}
#agree-body::-webkit-scrollbar{width:3px}
#agree-body::-webkit-scrollbar-thumb{background:var(--blue);border-radius:2px}
.ag-block{padding:11px 0;border-bottom:1px solid rgba(255,255,255,.05)}
.ag-block:last-child{border-bottom:none}
.ag-block-title{font-size:.72rem;font-weight:700;color:rgba(238,244,255,.9);margin-bottom:5px;display:flex;align-items:center;gap:6px;letter-spacing:.01em}
.ag-block-title::before{content:'';width:2px;height:11px;border-radius:2px;background:var(--blue);flex-shrink:0}
.ag-block p,.ag-block li{font-size:.73rem;color:rgba(238,244,255,.55);line-height:1.6;margin-bottom:3px}
.ag-block ul{padding-left:14px;margin-top:3px}
.ag-block li{margin-bottom:2px}
.ag-block.ag-red{background:rgba(239,68,68,.05);border:1px solid rgba(239,68,68,.15);border-radius:10px;padding:10px 13px;margin-bottom:0}
.ag-block.ag-red .ag-block-title::before{background:#f87171}
.ag-block.ag-red .ag-block-title{color:#fca5a5}
.ag-block.ag-red p{color:rgba(252,165,165,.7)}
#agree-footer{flex-shrink:0;padding:12px 20px 20px}
#agree-progress-track{height:2px;background:rgba(255,255,255,.07);border-radius:2px;margin-bottom:11px;overflow:hidden}
#agree-progress-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--blue),#4ade80);border-radius:2px;transition:width .15s ease}
#agree-bottom-row{display:flex;align-items:center;gap:10px}
#agree-note{font-size:.64rem;color:rgba(255,255,255,.28);flex:1;line-height:1.35}
#agree-btn{background:rgba(27,95,199,.2);border:1.5px solid rgba(27,95,199,.5);color:rgba(91,163,255,.5);padding:10px 20px;border-radius:12px;font-family:'DM Sans',sans-serif;font-size:.76rem;font-weight:700;cursor:not-allowed;transition:all .25s;white-space:nowrap;flex-shrink:0}
#agree-btn:disabled{opacity:1}
#agree-btn.ready{background:rgba(34,197,94,.12);border-color:#4ade80;color:#4ade80;cursor:pointer;animation:glow-green 1s ease-out}
#agree-btn.ready:hover{background:#4ade80;color:#000;border-color:#4ade80}
@keyframes glow-green{0%{box-shadow:0 0 0 0 rgba(74,222,128,.45)}70%{box-shadow:0 0 0 10px rgba(74,222,128,0)}100%{box-shadow:0 0 0 0 rgba(74,222,128,0)}}

/* ── INFO TAB ── */
.info-doc{max-width:820px;margin:0 auto}
.info-hero{background:linear-gradient(135deg,rgba(27,95,199,.15),rgba(27,95,199,.05));border:1px solid rgba(27,95,199,.2);border-radius:14px;padding:24px 28px;margin-bottom:26px;text-align:center}
.info-hero-title{font-family:'Bebas Neue',sans-serif;font-size:2rem;letter-spacing:.12em;color:var(--white);margin-bottom:4px}
.info-hero-sub{font-size:.78rem;color:var(--dim2);letter-spacing:.1em;text-transform:uppercase;margin-bottom:10px}
.info-hero-contact{font-size:.82rem;color:var(--blue3)}
.info-hero-contact a{color:var(--blue3);text-decoration:none;font-weight:700}
.ia-section{display:flex;gap:16px;background:var(--bg2);border:1px solid var(--border);border-radius:12px;padding:18px 20px;margin-bottom:14px}
.ia-section--warn{background:rgba(239,68,68,.04);border-color:rgba(239,68,68,.18)}
.ia-num{width:28px;height:28px;border-radius:50%;background:rgba(27,95,199,.2);border:1px solid var(--blue);color:var(--blue3);font-size:.75rem;font-weight:800;display:flex;align-items:center;justify-content:center;flex-shrink:0;margin-top:2px}
.ia-num--warn{background:rgba(239,68,68,.12);border-color:rgba(239,68,68,.4);color:#fca5a5}
.ia-title{font-size:.88rem;font-weight:700;color:var(--white);margin-bottom:8px}
.ia-section p{font-size:.81rem;color:rgba(238,244,255,.78);line-height:1.7;margin-bottom:6px}
.ia-section p:last-child{margin-bottom:0}
.ia-warn{color:#fca5a5 !important;font-weight:700}
.ia-table-wrap{overflow-x:auto;margin:10px 0}
.ia-tbl{width:100%;border-collapse:collapse;font-size:.78rem}
.ia-tbl th{padding:7px 12px;text-align:left;color:var(--dim);font-size:.67rem;text-transform:uppercase;letter-spacing:.08em;border-bottom:1px solid var(--border);background:rgba(0,0,0,.12)}
.ia-tbl td{padding:8px 12px;border-bottom:1px solid rgba(255,255,255,.035);vertical-align:middle;color:rgba(238,244,255,.8)}
.ia-tbl tr:last-child td{border-bottom:none}
.ia-footer{text-align:center;padding:20px;background:rgba(27,95,199,.06);border:1px solid rgba(27,95,199,.15);border-radius:12px;margin-top:6px}
.ia-footer p{font-size:.78rem;color:var(--dim2);line-height:1.7}
.ia-footer a{color:var(--blue3);text-decoration:none;font-weight:600}
.sell-bar{display:flex;align-items:center;justify-content:center;padding:9px 16px;border-top:1px solid var(--border)}
.sell-btn{display:inline-flex;align-items:center;gap:6px;background:linear-gradient(135deg,rgba(34,197,94,.15),rgba(16,185,129,.1));border:1px solid rgba(34,197,94,.4);color:#4ade80;padding:6px 20px;border-radius:20px;font-size:.72rem;font-weight:700;cursor:pointer;transition:all .25s;font-family:'DM Sans',sans-serif;letter-spacing:.04em}
.sell-btn:hover{background:linear-gradient(135deg,rgba(34,197,94,.3),rgba(16,185,129,.2));border-color:#4ade80}
/* ── QUOTE POPUP ── */
#quote-popup-overlay{position:fixed;inset:0;background:rgba(2,6,14,.6);backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);z-index:10000;display:none;align-items:center;justify-content:center;opacity:0;transition:opacity .3s}
#quote-popup-overlay.show{display:flex;opacity:1}
#quote-popup{background:linear-gradient(165deg,#0c1529,#111d35);border:1px solid rgba(59,130,246,.2);border-radius:20px;padding:32px 28px;max-width:380px;width:90%;text-align:center;box-shadow:0 20px 60px rgba(0,0,0,.6);animation:slide-up .35s cubic-bezier(.32,1.2,.64,1)}
#quote-popup h3{color:#e2e8f0;font-size:1.05rem;font-weight:700;margin:0 0 8px}
#quote-popup p{color:rgba(255,255,255,.55);font-size:.82rem;line-height:1.5;margin:0 0 22px}
#quote-popup .qp-number{font-size:1.3rem;font-weight:800;color:#fff;letter-spacing:.02em;margin-bottom:20px}
#quote-popup .qp-actions{display:flex;gap:10px;justify-content:center;margin-bottom:16px}
#quote-popup .qp-btn{display:inline-flex;align-items:center;gap:7px;padding:10px 22px;border-radius:12px;font-size:.8rem;font-weight:700;text-decoration:none;transition:all .25s;font-family:'DM Sans',sans-serif;border:none;cursor:pointer}
#quote-popup .qp-call{background:linear-gradient(135deg,#16a34a,#22c55e);color:#fff}
#quote-popup .qp-call:hover{background:linear-gradient(135deg,#15803d,#16a34a)}
#quote-popup .qp-text{background:linear-gradient(135deg,#2563eb,#3b82f6);color:#fff}
#quote-popup .qp-text:hover{background:linear-gradient(135deg,#1d4ed8,#2563eb)}
#quote-popup .qp-close{background:none;border:none;color:rgba(255,255,255,.35);font-size:.75rem;cursor:pointer;font-family:'DM Sans',sans-serif;transition:color .2s}
#quote-popup .qp-close:hover{color:rgba(255,255,255,.6)}
</style>
</head>
<body>

<header>
  <div class="hdr">
    <div class="brand">
      <svg class="gem" viewBox="0 0 34 52" fill="none" xmlns="http://www.w3.org/2000/svg">
        <!-- Phone body outline -->
        <rect x="2" y="2" width="30" height="48" rx="5" stroke="#c8a84b" stroke-width="2.2" fill="none"/>
        <!-- Top speaker -->
        <rect x="11" y="7.5" width="12" height="2.5" rx="1.2" fill="#c8a84b"/>
        <!-- Bottom home indicator -->
        <rect x="12" y="43" width="10" height="2" rx="1" fill="#c8a84b"/>
        <!-- Dollar vertical bar -->
        <line x1="17" y1="17" x2="17" y2="37" stroke="#5ba3ff" stroke-width="2" stroke-linecap="round"/>
        <!-- Dollar top curve -->
        <path d="M22 20.5 C22 18.5 20 17 17 17 C14 17 12 18.8 12 21 C12 23.2 14 24 17 24.5 C20 25 22 26 22 28.5 C22 31 20 33 17 33 C14 33 12 31.5 12 29.5" stroke="#5ba3ff" stroke-width="2" stroke-linecap="round" fill="none"/>
      </svg>
      <div><h1><span class="m901">Memphis</span> <span class="buyer">901 Buyer</span></h1><a href="tel:+19017131565" style="display:flex;align-items:center;gap:6px;font-size:.75rem;color:#f59e0b;letter-spacing:.1em;text-transform:uppercase;margin-top:4px;text-decoration:none;transition:color .18s;font-weight:700" onmouseover="this.style.color='#fbbf24'" onmouseout="this.style.color='#f59e0b'"><svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>(901) 713-1565</a></div>
    </div>
    
    <div class="hdr-right">
      <div class="upd-badge"><span class="pulse"></span> Updated <span id="upd-date">Feb 27, 2026</span></div>
    </div>
  </div>
</header>

<div class="cattabs">
  <div class="ctabs-inner">
    <div class="ctab active" onclick="showCat('iphones',this)">iPhones</div>
    <div class="ctab" onclick="showCat('ipads',this)">iPads</div>
    <div class="ctab" onclick="showCat('macbooks',this)">MacBooks</div>
    <div class="ctab" onclick="showCat('samsung',this)">Samsung</div>
    <div class="ctab" onclick="showCat('watches',this)">Watches &amp; AirPods</div>
    <div class="ctab" onclick="showCat('estimator',this)">Estimator</div>
    <div class="ctab" onclick="showCat('info',this)">Info</div>
  </div>
</div>

<main class="main">

  <!-- WELCOME BANNER -->
  <div class="welcome-banner" id="welcome-banner">
    <div class="welcome-banner-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="5" y="2" width="14" height="20" rx="2"/><line x1="12" y1="18" x2="12.01" y2="18"/></svg></div>
    <div class="welcome-banner-text">
      <h3>Welcome to Memphis 901 Buyer</h3>
      <p>Browse our live wholesale buy prices below. Tap any price to copy it. Use the Estimator tab for quick quotes. Prices updated weekly.</p>
    </div>
    <button class="welcome-banner-close" onclick="document.getElementById('welcome-banner').style.display='none';sessionStorage.setItem('wb-closed','1')" title="Dismiss">✕</button>
  </div>
  <script>if(sessionStorage.getItem('wb-closed')==='1'){document.getElementById('welcome-banner').style.display='none';}</script>

  <div class="section active" id="sec-iphones">
    <div class="iph-filters">

      <div class="stab active" onclick="showSub('iph','new-ul',this)">
        <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 9.9-1"/></svg>
        New — Unlocked
      </div>

      <div class="stab" onclick="showSub('iph','new-lk',this)">
        <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
        New — Sim Locked
      </div>

      <div class="stab" onclick="showSub('iph','used-ul',this)">
        <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 9.9-1"/></svg>
        Used — Unlocked
      </div>

      <div class="stab" onclick="showSub('iph','used-lk',this)">
        <svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
        Used — Sim Locked
      </div>

    </div>
    <div style="text-align:center;margin:-10px 0 18px;font-size:.72rem;font-weight:600;color:var(--dim2);letter-spacing:.12em;text-transform:uppercase">We Buy at Those Prices &nbsp;↓</div>
    <div class="subsec active" id="iph-new-ul"><div id="ni-ul-blocks"></div></div>
    <div class="subsec" id="iph-new-lk"><div id="ni-lk-blocks"></div></div>
    <div class="subsec" id="iph-used-ul">
      <div id="ui-ul-blocks"></div>
    </div>
    <div class="subsec" id="iph-used-lk">
      <div id="ui-lk-blocks"></div>
    </div>
  </div>

  <div class="section" id="sec-ipads">
    <div class="subtabs">
      <div class="stab active" onclick="showSub('ipad','new',this)">New iPads</div>
      <div class="stab" onclick="showSub('ipad','used',this)">Used iPads</div>
    </div>
    <div class="subsec active" id="ipad-new"><div id="nipad-cards"></div></div>
    <div class="subsec" id="ipad-used">
      <div id="uipad-cards"></div>
    </div>
  </div>

  <div class="section" id="sec-macbooks">
    <div id="mac-cards"></div>
  </div>

  <div class="section" id="sec-samsung">
    <div class="subtabs">
      <div class="stab active" onclick="showSub('sam','ul',this)">Unlocked</div>
      <div class="stab" onclick="showSub('sam','lk',this)">Sim Locked</div>
    </div>
    <div class="subsec active" id="sam-ul"><div id="sam-ul-cards"></div></div>
    <div class="subsec" id="sam-lk"><div id="sam-lk-cards"></div></div>
  </div>

  <div class="section" id="sec-watches">
    <div class="subtabs">
      <div class="stab active" onclick="showSub('wa','watch',this)">Apple Watch</div>
      <div class="stab" onclick="showSub('wa','air',this)">AirPods</div>
    </div>
    <div class="subsec active" id="wa-watch">
      <div id="watch-cards"></div>
    </div>
    <div class="subsec" id="wa-air"><div id="air-cards"></div></div>
  </div>

  <!-- ── PRICE ESTIMATOR TAB ── -->
  <div class="section" id="sec-estimator">
    <div class="est-wrap">
      <div class="est-card">
        <div class="est-header">
          <h2>Quick Price Estimator</h2>
          <p>Get an instant estimate for your device</p>
        </div>
        <div class="est-body">
          <div class="est-field">
            <label>Device Category</label>
            <select class="est-select" id="est-category" onchange="estUpdateModels()">
              <option value="">Select category...</option>
              <option value="newPhone">New iPhone</option>
              <option value="usedPhone">Used iPhone</option>
              <option value="newIpad">New iPad</option>
              <option value="usedIpad">Used iPad</option>
              <option value="macbook">MacBook</option>
            </select>
          </div>
          <div class="est-field">
            <label>Model</label>
            <select class="est-select" id="est-model" onchange="estUpdateStorage()">
              <option value="">Select model...</option>
            </select>
          </div>
          <div class="est-field">
            <label>Storage / Configuration</label>
            <select class="est-select" id="est-storage" onchange="estUpdatePrice()">
              <option value="">Select storage...</option>
            </select>
          </div>
          <div class="est-field" id="est-condition-wrap" style="display:none">
            <label>Condition</label>
            <select class="est-select" id="est-condition" onchange="estUpdatePrice()">
              <option value="0">Best Condition</option>
            </select>
          </div>
          <div class="est-result" id="est-result">
            <div class="est-result-label">Estimated Buy Price</div>
            <div class="est-result-price" id="est-price">$0</div>
            <div class="est-result-note">This is an estimate. Final price depends on inspection.</div>
            <div class="est-result-range" id="est-range"></div>
            <div style="margin-top:16px">
              <a href="tel:+19017131565" style="display:inline-flex;align-items:center;gap:8px;background:linear-gradient(135deg,rgba(34,197,94,.15),rgba(16,185,129,.1));border:1px solid rgba(34,197,94,.4);color:#4ade80;padding:10px 24px;border-radius:20px;font-size:.8rem;font-weight:700;text-decoration:none;transition:all .25s">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
                Call to Sell — (901) 713-1565
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ── INFO / AGREEMENT TAB ── -->
  <div class="section" id="sec-info">
    <div class="info-doc">

      <!-- Hero -->
      <div class="info-hero">
        <div style="display:flex;align-items:center;justify-content:center;gap:12px;margin-bottom:10px">
          <svg width="32" height="48" viewBox="0 0 34 52" fill="none"><rect x="2" y="2" width="30" height="48" rx="5" stroke="#c8a84b" stroke-width="2.2" fill="none"/><rect x="11" y="7.5" width="12" height="2.5" rx="1.2" fill="#c8a84b"/><line x1="17" y1="17" x2="17" y2="37" stroke="#5ba3ff" stroke-width="2" stroke-linecap="round"/><path d="M22 20.5C22 18.5 20 17 17 17C14 17 12 18.8 12 21C12 23.2 14 24 17 24.5C20 25 22 26 22 28.5C22 31 20 33 17 33C14 33 12 31.5 12 29.5" stroke="#5ba3ff" stroke-width="2" stroke-linecap="round" fill="none"/></svg>
          <div style="text-align:left">
            <div class="info-hero-title">Vendor Agreement</div>
            <div class="info-hero-sub">Memphis 901 Buyer &middot; Sapphire Wholesale LLC</div>
          </div>
        </div>
        <div class="info-hero-contact">
          <a href="tel:+19017131565">(901) 713-1565</a>
          &nbsp;&middot;&nbsp; Memphis, Tennessee
          &nbsp;&middot;&nbsp; Mon&ndash;Sat 8:00 AM &ndash; 9:00 PM
        </div>
      </div>

      <!-- Quick Info Cards -->
      <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-bottom:22px">
        <div style="background:rgba(59,130,246,.06);border:1px solid rgba(59,130,246,.15);border-radius:10px;padding:14px;text-align:center">
          <div style="font-family:'Bebas Neue',sans-serif;font-size:1.3rem;color:var(--blue3);line-height:1">Mon&ndash;Sat</div>
          <div style="font-size:.65rem;color:var(--dim);margin-top:3px">8 AM &ndash; 9 PM</div>
        </div>
        <div style="background:rgba(34,197,94,.06);border:1px solid rgba(34,197,94,.15);border-radius:10px;padding:14px;text-align:center">
          <div style="font-family:'Bebas Neue',sans-serif;font-size:1.3rem;color:#4ade80;line-height:1">Same Day</div>
          <div style="font-size:.65rem;color:var(--dim);margin-top:3px">Inspection &amp; Pay</div>
        </div>
        <div style="background:rgba(251,191,36,.06);border:1px solid rgba(251,191,36,.15);border-radius:10px;padding:14px;text-align:center">
          <div style="font-family:'Bebas Neue',sans-serif;font-size:1.3rem;color:#fbbf24;line-height:1">Cash</div>
          <div style="font-size:.65rem;color:var(--dim);margin-top:3px">Zelle &middot; CashApp</div>
        </div>
      </div>

      <!-- How It Works -->
      <div style="background:linear-gradient(135deg,rgba(59,130,246,.08),rgba(139,92,246,.05));border:1px solid rgba(59,130,246,.15);border-radius:12px;padding:20px;margin-bottom:22px">
        <div style="font-size:.82rem;font-weight:700;color:var(--white);margin-bottom:14px;display:flex;align-items:center;gap:8px">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--blue3)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
          How It Works
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:14px">
          <div style="text-align:center">
            <div style="width:32px;height:32px;border-radius:50%;background:rgba(59,130,246,.15);border:1px solid rgba(59,130,246,.3);color:var(--blue3);font-size:.8rem;font-weight:800;display:flex;align-items:center;justify-content:center;margin:0 auto 8px">1</div>
            <div style="font-size:.75rem;font-weight:700;color:var(--white);margin-bottom:3px">Contact Us</div>
            <div style="font-size:.68rem;color:var(--dim2);line-height:1.5">Call or text with your device details</div>
          </div>
          <div style="text-align:center">
            <div style="width:32px;height:32px;border-radius:50%;background:rgba(59,130,246,.15);border:1px solid rgba(59,130,246,.3);color:var(--blue3);font-size:.8rem;font-weight:800;display:flex;align-items:center;justify-content:center;margin:0 auto 8px">2</div>
            <div style="font-size:.75rem;font-weight:700;color:var(--white);margin-bottom:3px">We Inspect</div>
            <div style="font-size:.68rem;color:var(--dim2);line-height:1.5">IMEI check, grading, and final offer same day</div>
          </div>
          <div style="text-align:center">
            <div style="width:32px;height:32px;border-radius:50%;background:rgba(34,197,94,.15);border:1px solid rgba(34,197,94,.3);color:#4ade80;font-size:.8rem;font-weight:800;display:flex;align-items:center;justify-content:center;margin:0 auto 8px">3</div>
            <div style="font-size:.75rem;font-weight:700;color:var(--white);margin-bottom:3px">Get Paid</div>
            <div style="font-size:.68rem;color:var(--dim2);line-height:1.5">Instant payment via Cash, Zelle, or CashApp</div>
          </div>
        </div>
      </div>

      <!-- What We Buy -->
      <div style="background:var(--bg2);border:1px solid var(--border);border-radius:12px;padding:18px 20px;margin-bottom:22px">
        <div style="font-size:.82rem;font-weight:700;color:var(--white);margin-bottom:12px;display:flex;align-items:center;gap:8px">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--blue3)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
          What We Buy
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px">
          <div style="font-size:.78rem;color:rgba(238,244,255,.7);padding:6px 0;border-bottom:1px solid rgba(255,255,255,.04)">iPhones (all models 11+)</div>
          <div style="font-size:.78rem;color:rgba(238,244,255,.7);padding:6px 0;border-bottom:1px solid rgba(255,255,255,.04)">iPads (all recent models)</div>
          <div style="font-size:.78rem;color:rgba(238,244,255,.7);padding:6px 0;border-bottom:1px solid rgba(255,255,255,.04)">MacBooks (Air &amp; Pro)</div>
          <div style="font-size:.78rem;color:rgba(238,244,255,.7);padding:6px 0;border-bottom:1px solid rgba(255,255,255,.04)">Samsung Galaxy S &amp; Z Series</div>
          <div style="font-size:.78rem;color:rgba(238,244,255,.7);padding:6px 0">Apple Watch (all series)</div>
          <div style="font-size:.78rem;color:rgba(238,244,255,.7);padding:6px 0">AirPods (all models)</div>
        </div>
      </div>

      <!-- Sections 1-15 -->
      <div style="font-size:.7rem;font-weight:700;text-transform:uppercase;letter-spacing:.14em;color:var(--dim);margin-bottom:14px;padding-left:2px">Vendor Terms &amp; Conditions</div>

      <div class="ia-section"><div class="ia-num">1</div><div>
        <div class="ia-title">Business Hours &amp; Contact</div>
        <p>Open <strong>Monday &ndash; Saturday: 8:00 AM &ndash; 9:00 PM</strong>. Closed Sundays. All transactions must occur during posted business hours. No exceptions.</p>
        <p>Memphis, Tennessee &nbsp;|&nbsp; <a href="tel:+19017131565">(901) 713-1565</a></p>
      </div></div>

      <div class="ia-section"><div class="ia-num">2</div><div>
        <div class="ia-title">Lawful Possession Requirement</div>
        <p class="ia-warn">WE ONLY PURCHASE FROM SUPPLIERS WHO ARE IN LAWFUL POSSESSION OF THEIR PRODUCTS.</p>
        <p>You must legally own the device OR have written authorization from the owner to sell it. The device must NOT be stolen, lost, obtained through fraud, subject to any disputed transaction, or subject to any court order or law enforcement investigation. There must be NO liens or claims against this device.</p>
        <p><strong>If you do not meet these requirements, DO NOT PROCEED. We will refuse your transaction.</strong></p>
      </div></div>

      <div class="ia-section"><div class="ia-num">3</div><div>
        <div class="ia-title">Right to Refuse Business</div>
        <p>Sapphire Wholesale LLC reserves the absolute right to refuse business to any supplier for any reason, including: inability to provide truthful information about device origin, device fails any verification checks (IMEI, carrier status, activation lock), suspected fraudulent or stolen merchandise, inconsistencies in your account of device ownership, pattern of selling devices with issues or flags, refusal to cooperate with inspection, previous transactions resulting in stolen device reports, or suspicion of criminal activity.</p>
        <p>No explanation will be provided. No refund will be issued if a transaction is rejected.</p>
      </div></div>

      <div class="ia-section"><div class="ia-num">4</div><div>
        <div class="ia-title">Payment Methods &amp; Terms</div>
        <p><strong>Accepted:</strong> Cash (in-person only) &middot; CashApp &middot; Zelle &middot; Pre-arranged mobile payments.</p>
        <p>Payment is issued <em>after</em> successful inspection and verification. We do NOT hold payments or issue advance payments. Payment is contingent on device passing all inspections.</p>
      </div></div>

      <div class="ia-section"><div class="ia-num">5</div><div>
        <div class="ia-title">Inspection Process &amp; Device Grading</div>
        <p>All inspections are completed on the <strong>same business day</strong>. You are welcome to remain present during inspection.</p>
        <div class="ia-table-wrap"><table class="ia-tbl">
          <thead><tr><th>Grade</th><th>Condition</th></tr></thead>
          <tbody>
            <tr><td><span class="gp g-hso">A+ GRADE</span></td><td>Fully functional, perfect condition, no dents or scratches anywhere</td></tr>
            <tr><td><span class="gp g-a">B GRADE</span></td><td>Fully functional, dents or scratches present. No heavy/deep scratches</td></tr>
            <tr><td><span class="gp g-b">C GRADE</span></td><td>Fully functional, heavy dents or scratches, cracked glass, good LCD</td></tr>
            <tr><td><span class="gp g-c">D GRADE</span></td><td>Fully functional, heavy dents/scratches, LCD lines/spots, NO blackout LCD</td></tr>
            <tr><td><span class="gp g-d">DOA</span></td><td>No power, any combination of problems, no missing parts allowed</td></tr>
            <tr><td><span class="gp g-hso">NEW/SEALED</span></td><td>Non-active, box in good condition, all sealed intact. Never used</td></tr>
            <tr><td><span class="gp g-a">NEW/OPENED</span></td><td>Activation OK (30+ days), box in good condition, plastic on all accessories &amp; screen. Never used</td></tr>
            <tr><td><span class="gp g-hso">HSO</span></td><td>New device swapped from Apple, no box, no signs of use, NEVER ACTIVATED. Must have plastic. &quot;N&quot; MODEL NUMBER</td></tr>
          </tbody>
        </table></div>
        <p>Devices with defects are deducted accordingly. You will be informed of grading results and final offer. You have the right to refuse the final offer and walk away &mdash; no fee.</p>
      </div></div>

      <div class="ia-section"><div class="ia-num">6</div><div>
        <div class="ia-title">Verification &amp; IMEI Checks</div>
        <p>All devices undergo mandatory verification: SICKW database search, Hitek verification, national carrier blacklists, Apple theft recovery database, iCloud activation lock status, Find My iPhone status, and AT&amp;T / Verizon / T-Mobile / Sprint blacklist checks.</p>
        <p>If any check fails, the device is <strong>rejected immediately</strong>. No payment will be issued. You may take the device back or leave it &mdash; your choice.</p>
      </div></div>

      <div class="ia-section"><div class="ia-num">7</div><div>
        <div class="ia-title">MDM Locked Devices Policy</div>
        <p>We CAN purchase MDM locked devices, but they receive <strong>significant price deductions</strong>. If your device has an MDM lock, message us <em>before</em> bringing the device so we can provide an estimated deduction. Do NOT assume we will purchase or assume any specific price point for MDM units without prior confirmation.</p>
      </div></div>

      <div class="ia-section"><div class="ia-num">8</div><div>
        <div class="ia-title">Shipping &amp; Remote Transactions</div>
        <p>For out-of-area sellers: contact us first to confirm pricing and shipping details. Devices must be shipped with tracking and insurance. Payment is issued <strong>after</strong> the device arrives and passes inspection. Sapphire Wholesale LLC is not responsible for devices lost or damaged in transit.</p>
      </div></div>

      <div class="ia-section ia-section--warn"><div class="ia-num ia-num--warn">9</div><div>
        <div class="ia-title">Legal Responsibility &amp; Indemnification</div>
        <p class="ia-warn">IMPORTANT &mdash; READ CAREFULLY</p>
        <p>By accepting payment from Sapphire Wholesale LLC, you provide a <strong>guarantee and warranty</strong> that all goods are acquired legally. You accept ALL legal responsibility for any claims made against Sapphire Wholesale LLC for goods sold &mdash; including stolen property claims, fraud, defective goods, or any other legal claim by law enforcement, carriers, original owners, or any third party.</p>
        <p>You agree to <strong>fully indemnify</strong> Sapphire Wholesale LLC and pay ALL legal costs (attorney fees, court costs, investigative expenses) incurred in defending against such claims, regardless of whether the claim is valid.</p>
        <p>If a device you sold us is later reported stolen &mdash; <strong>you are liable</strong>. If we face legal action over a device &mdash; <strong>you must pay our legal defense costs</strong>.</p>
      </div></div>

      <div class="ia-section ia-section--warn"><div class="ia-num ia-num--warn">10</div><div>
        <div class="ia-title">Stolen &amp; Fraudulent Device Policy</div>
        <p class="ia-warn">WE DO NOT BUY STOLEN OR FRAUDULENT PHONES.</p>
        <p>This includes devices reported stolen, flagged on carrier blacklists, on IMEI theft recovery databases, obtained through theft/robbery/scam/fraud, counterfeit or replica devices, devices with cloned IMEIs, or devices with false condition representations.</p>
        <p>If you attempt to sell stolen devices: we will refuse the transaction, may file a police report with your information, and reserve the right to contact law enforcement. You may face criminal charges independently of our actions.</p>
      </div></div>

      <div class="ia-section"><div class="ia-num">11</div><div>
        <div class="ia-title">Verification &amp; Law Enforcement Cooperation</div>
        <p>We record the ESN/IMEI for every device purchased, creating a permanent record. All devices are photographed and fully documented. Sapphire Wholesale LLC <strong>regularly cooperates with law enforcement investigations</strong> and provides device records, documentation, and vendor information when requested. Your information will be provided to law enforcement if requested. Selling stolen property can result in criminal charges.</p>
      </div></div>

      <div class="ia-section"><div class="ia-num">12</div><div>
        <div class="ia-title">Data Wipe &amp; Privacy Protocol</div>
        <p>After purchase, all personal data is removed, all accounts (Apple ID, Google, etc.) are removed, and the device is restored to factory default settings. No personal information from the previous owner remains on any sold device.</p>
      </div></div>

      <div class="ia-section"><div class="ia-num">13</div><div>
        <div class="ia-title">Pricing &amp; Price Adjustments</div>
        <p>All prices listed on this site are <strong>buy prices</strong> &mdash; what we pay you. Prices are updated weekly and are subject to change based on market conditions. Prices shown are for the listed condition only. Devices that do not match the expected condition will be re-graded and priced accordingly. The final offer may differ from the listed price based on inspection results.</p>
      </div></div>

      <div class="ia-section"><div class="ia-num">14</div><div>
        <div class="ia-title">Dispute Resolution</div>
        <p>Any disputes arising from transactions must be raised within <strong>48 hours</strong> of the transaction. After 48 hours, all sales are considered final. Disputes will be resolved in accordance with Tennessee law. Both parties agree to attempt good-faith resolution before pursuing legal action.</p>
      </div></div>

      <div class="ia-section"><div class="ia-num">15</div><div>
        <div class="ia-title">Tennessee Law &amp; Jurisdiction</div>
        <p>This agreement is governed by the laws of the State of Tennessee. Selling stolen property in Tennessee is a crime &mdash; penalties include fines and imprisonment. We reserve the right to pursue civil claims for damages, file police reports, and cooperate with law enforcement.</p>
      </div></div>

      <div class="ia-footer">
        <p>By conducting any transaction with Sapphire Wholesale LLC, you acknowledge you have read and agree to all terms above.</p>
        <p>Effective Date: 2/27/2026 &nbsp;&middot;&nbsp; Memphis, Tennessee &nbsp;&middot;&nbsp; <a href="tel:+19017131565">(901) 713-1565</a></p>
        <div style="margin-top:14px">
          <a href="tel:+19017131565" style="display:inline-flex;align-items:center;gap:8px;background:linear-gradient(135deg,rgba(34,197,94,.15),rgba(16,185,129,.1));border:1px solid rgba(34,197,94,.4);color:#4ade80;padding:10px 24px;border-radius:20px;font-size:.78rem;font-weight:700;text-decoration:none;transition:all .25s">
            <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
            Contact Us &mdash; (901) 713-1565
          </a>
        </div>
      </div>

    </div>
  </div>
</main>

<!-- FOOTER -->
<footer style="background:rgba(2,8,23,.6);border-top:1px solid rgba(255,255,255,.06);padding:28px 28px 36px;text-align:center">
  <div style="max-width:1480px;margin:0 auto">
    <div style="display:flex;align-items:center;justify-content:center;gap:10px;margin-bottom:12px">
      <svg width="20" height="30" viewBox="0 0 34 52" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="2" y="2" width="30" height="48" rx="5" stroke="#c8a84b" stroke-width="2.2" fill="none"/>
        <rect x="11" y="7.5" width="12" height="2.5" rx="1.2" fill="#c8a84b"/>
        <line x1="17" y1="17" x2="17" y2="37" stroke="#5ba3ff" stroke-width="2" stroke-linecap="round"/>
        <path d="M22 20.5C22 18.5 20 17 17 17C14 17 12 18.8 12 21C12 23.2 14 24 17 24.5C20 25 22 26 22 28.5C22 31 20 33 17 33C14 33 12 31.5 12 29.5" stroke="#5ba3ff" stroke-width="2" stroke-linecap="round" fill="none"/>
      </svg>
      <span style="font-family:'Bebas Neue',sans-serif;font-size:1.1rem;letter-spacing:.08em;color:rgba(255,255,255,.5)">Memphis <span style="color:rgba(74,222,128,.5)">901 Buyer</span></span>
    </div>
    <p style="font-size:.72rem;color:rgba(255,255,255,.25);margin-bottom:6px">Sapphire Wholesale LLC &middot; Memphis, Tennessee</p>
    <p style="font-size:.68rem;color:rgba(255,255,255,.18);margin-bottom:12px">Mon&ndash;Sat 8:00 AM &ndash; 9:00 PM &middot; <a href="tel:+19017131565" style="color:rgba(91,163,255,.4);text-decoration:none">(901) 713-1565</a></p>
    <div style="display:flex;justify-content:center;gap:16px;margin-bottom:12px">
      <a href="tel:+19017131565" style="font-size:.7rem;color:rgba(91,163,255,.5);text-decoration:none;display:flex;align-items:center;gap:4px">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
        Call
      </a>
      <a href="sms:+19017131565" style="font-size:.7rem;color:rgba(91,163,255,.5);text-decoration:none;display:flex;align-items:center;gap:4px">
        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
        Text
      </a>
    </div>
    <p style="font-size:.6rem;color:rgba(255,255,255,.12)">&copy; 2026 Sapphire Wholesale LLC. All rights reserved. Prices subject to change.</p>
  </div>
</footer>

<!-- ── QUOTE POPUP ── -->
<div id="quote-popup-overlay">
  <div id="quote-popup">
    <h3>Ready to get a quote?</h3>
    <p>Text or call us now for a fast quote on your device. We offer same-day payouts!</p>
    <div class="qp-number">(901) 713-1565</div>
    <div class="qp-actions">
      <a href="tel:+19017131565" class="qp-btn qp-call">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:16px;height:16px"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72c.127.96.361 1.903.7 2.81a2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
        Call
      </a>
      <a href="sms:+19017131565" class="qp-btn qp-text">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width:16px;height:16px"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
        Text
      </a>
    </div>
    <button class="qp-close" onclick="closeQuotePopup()">No thanks, just browsing</button>
  </div>
</div>

<div id="toast"></div>

<!-- BACK TO TOP -->
<button id="btt" onclick="window.scrollTo({top:0,behavior:'smooth'})" title="Back to top">
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 15l-6-6-6 6"/></svg>
</button>


<!-- ── AGREEMENT OVERLAY ── -->
<div id="agree-overlay">
  <div id="agree-modal">

    <!-- drag handle -->
    <div id="agree-handle">
      <div id="agree-handle-bar"></div>
      <div id="agree-header">
        <div id="agree-icon">
          <svg viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
        </div>
        <div id="agree-header-text">
          <h2><span>Memphis 901</span> Buyer — Vendor Terms</h2>
          <p>Scroll to read · Agree to continue</p>
        </div>
      </div>
    </div>

    <!-- scroll hint -->
    <div id="agree-scroll-hint">
      <svg viewBox="0 0 24 24"><path d="M12 5v14M5 12l7 7 7-7"/></svg>
      Scroll down to read all terms before agreeing
    </div>

    <!-- body -->
    <div id="agree-body">

      <div class="ag-block ag-red">
        <div class="ag-block-title">Lawful Possession Requirement</div>
        <p>You must be the <strong style="color:#fca5a5">legal owner</strong> of any device you intend to sell, or have written authorization. The device must <strong style="color:#fca5a5">NOT</strong> be stolen, lost, obtained through fraud, or under any legal hold or investigation.</p>
        <p><strong style="color:#fca5a5">If this does not apply to you — do not proceed.</strong></p>
      </div>

      <div class="ag-block">
        <div class="ag-block-title">Legal Responsibility & Indemnification</div>
        <p>By accepting payment you <strong style="color:#eef4ff">guarantee</strong> all goods are legally acquired. You accept full legal responsibility for any claims — stolen property, fraud, or third-party claims — made against Sapphire Wholesale LLC and agree to cover all associated legal costs.</p>
      </div>

      <div class="ag-block">
        <div class="ag-block-title">Verification Process</div>
        <p>All devices go through mandatory IMEI checks via SICKW, Hitek, carrier blacklists, and Apple theft databases. Failed checks = immediate rejection, no payment issued.</p>
      </div>

      <div class="ag-block">
        <div class="ag-block-title">Stolen Device Policy</div>
        <p>We do not purchase stolen or fraudulent devices. Attempting to sell stolen property may result in a police report filed with your information. In Tennessee, selling stolen property is a criminal offense.</p>
      </div>

      <div class="ag-block">
        <div class="ag-block-title">Business Hours</div>
        <p><strong style="color:#eef4ff">Mon – Sat 8:00 AM – 9:00 PM &nbsp;·&nbsp; Closed Sundays</strong><br>Memphis, Tennessee &nbsp;·&nbsp; <a href="tel:+19017131565" style="color:#5ba3ff;text-decoration:none">(901) 713-1565</a></p>
      </div>

      <div class="ag-block">
        <div class="ag-block-title">By agreeing you confirm</div>
        <ul>
          <li>You legally own the device or have written authorization to sell it</li>
          <li>All information provided is truthful and accurate</li>
          <li>The device was not stolen or obtained fraudulently</li>
          <li>No outstanding legal claims or disputes exist on the device</li>
          <li>You accept full indemnification responsibility</li>
          <li>You understand law enforcement may contact you if the device is flagged</li>
        </ul>
      </div>

    </div>

    <!-- footer -->
    <div id="agree-footer">
      <div id="agree-progress-track"><div id="agree-progress-fill"></div></div>
      <div id="agree-bottom-row">
        <div id="agree-note">Read all terms to unlock</div>
        <button id="agree-btn" onclick="acceptAgreement()" disabled>I Agree &amp; Enter</button>
      </div>
    </div>

  </div>
</div>


<!-- ── ADMIN OVERLAY ── -->
<div id="adm-overlay" style="display:none;position:fixed;inset:0;z-index:99999;background:rgba(2,6,14,.97);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px)">

  <!-- LOGIN -->
  <div id="adm-login" style="display:flex;align-items:center;justify-content:center;width:100%;height:100%">
    <div class="adm-login-card">
      <div class="adm-login-icon">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
      </div>
      <div style="font-family:'Bebas Neue',sans-serif;font-size:1.8rem;letter-spacing:.1em;color:#fff;margin-bottom:2px">ADMIN ACCESS</div>
      <div style="font-size:.65rem;color:rgba(255,255,255,.3);letter-spacing:.15em;text-transform:uppercase;margin-bottom:28px">Memphis 901 Buyer</div>
      <input id="adm-pass-input" type="password" placeholder="Enter password" class="adm-login-input"/>
      <div id="adm-err" style="display:none;color:#fca5a5;font-size:.75rem;margin-bottom:10px"></div>
      <button onclick="adminLogin()" class="adm-login-btn">Unlock Admin Panel</button>
      <button onclick="adminClose()" class="adm-login-cancel">Cancel</button>
    </div>
  </div>

  <!-- PANEL -->
  <div id="adm-panel" style="display:none;flex-direction:column;height:100%;overflow:hidden">

    <!-- Header -->
    <div class="adm-header">
      <div style="display:flex;align-items:center;gap:14px">
        <div class="adm-header-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
        </div>
        <div>
          <div style="font-family:'Bebas Neue',sans-serif;font-size:1.2rem;letter-spacing:.08em;color:#fff">Admin Panel <span style="color:#4ade80">· Memphis 901 Buyer</span></div>
          <div style="font-size:.6rem;color:rgba(255,255,255,.3);letter-spacing:.12em;text-transform:uppercase">Edit prices, models & listings</div>
        </div>
      </div>
      <div class="adm-header-actions">
        <div class="adm-search-wrap">
          <svg class="adm-search-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
          <input type="text" id="adm-search" placeholder="Search models..." class="adm-search-input" oninput="admFilterCards(this.value)"/>
        </div>
        <button id="adm-export-btn" onclick="admExport()" class="adm-hdr-btn adm-hdr-btn--export" title="Export Data">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          Export
        </button>
        <button id="adm-save-btn" onclick="admSave()" class="adm-hdr-btn adm-hdr-btn--save">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
          Save All
        </button>
        <button onclick="admResetAll()" class="adm-hdr-btn adm-hdr-btn--reset" title="Reset All">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
        </button>
        <button onclick="adminLogout()" class="adm-hdr-btn adm-hdr-btn--exit" title="Exit Admin">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
        </button>
      </div>
    </div>

    <!-- Stats Bar -->
    <div class="adm-stats-bar" id="adm-stats-bar"></div>

    <!-- Body -->
    <div style="display:flex;flex:1;overflow:hidden">

      <!-- Sidebar nav -->
      <div id="adm-nav" class="adm-sidebar"></div>

      <!-- Content -->
      <div id="adm-content" class="adm-content-area"></div>

    </div>
  </div>
</div>

<style>
/* ── ADMIN LOGIN ── */
.adm-login-card{background:rgba(15,23,42,0.95);backdrop-filter:blur(12px);border:1px solid rgba(59,130,246,.2);border-radius:24px;padding:48px 40px;width:360px;text-align:center;box-shadow:0 25px 80px rgba(0,0,0,.6)}
.adm-login-icon{width:64px;height:64px;background:linear-gradient(135deg,#3b82f6,#1b5fc7);border-radius:20px;display:flex;align-items:center;justify-content:center;margin:0 auto 24px;box-shadow:0 12px 40px rgba(59,130,246,.35),inset 0 1px 2px rgba(255,255,255,.2)}
.adm-login-input{width:100%;background:rgba(255,255,255,.08);border:1.5px solid rgba(59,130,246,.25);border-radius:14px;padding:14px 18px;color:#fff;font-family:'DM Sans',sans-serif;font-size:.95rem;outline:none;margin-bottom:14px;transition:all .25s}
.adm-login-input:focus{border-color:#3b82f6;background:rgba(59,130,246,.12);box-shadow:0 0 0 4px rgba(59,130,246,.15)}
.adm-login-btn{width:100%;background:linear-gradient(135deg,#3b82f6,#2563eb);border:none;border-radius:14px;color:#fff;font-family:'DM Sans',sans-serif;font-size:.9rem;font-weight:700;padding:14px;cursor:pointer;margin-bottom:12px;transition:all .25s;box-shadow:0 6px 20px rgba(59,130,246,.35);position:relative;overflow:hidden}
.adm-login-btn:hover{background:linear-gradient(135deg,#60a5fa,#3b82f6);transform:translateY(-2px);box-shadow:0 8px 28px rgba(59,130,246,.45)}
.adm-login-cancel{width:100%;background:transparent;border:1.5px solid rgba(255,255,255,.15);border-radius:14px;color:rgba(255,255,255,.5);font-family:'DM Sans',sans-serif;font-size:.85rem;padding:12px;cursor:pointer;transition:all .25s}
.adm-login-cancel:hover{border-color:rgba(255,255,255,.3);color:rgba(255,255,255,.8);background:rgba(255,255,255,.04)}

/* ── ADMIN HEADER ── */
.adm-header{display:flex;align-items:center;justify-content:space-between;padding:16px 24px;border-bottom:1px solid rgba(255,255,255,.08);flex-shrink:0;background:linear-gradient(180deg,#070d1a 0%,#0a1628 100%);gap:16px;flex-wrap:wrap}
.adm-header-icon{width:42px;height:42px;background:linear-gradient(135deg,#3b82f6,#2563eb);border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0;box-shadow:0 4px 15px rgba(59,130,246,.25)}
.adm-header-actions{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.adm-search-wrap{position:relative;flex-shrink:0}
.adm-search-icon{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--dim);pointer-events:none;font-size:.8rem}
.adm-search-input{background:rgba(255,255,255,.06);border:1.5px solid rgba(59,130,246,.2);border-radius:10px;padding:8px 12px 8px 36px;color:#f1f5f9;font-family:'DM Sans',sans-serif;font-size:.78rem;outline:none;width:200px;transition:all .25s}
.adm-search-input:focus{border-color:#3b82f6;width:240px;background:rgba(59,130,246,.08);box-shadow:0 0 0 3px rgba(59,130,246,.12)}
.adm-hdr-btn{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;border-radius:10px;font-family:'DM Sans',sans-serif;font-size:.75rem;font-weight:700;cursor:pointer;transition:all .25s;border:1.5px solid;flex-shrink:0}
.adm-hdr-btn--save{background:rgba(34,197,94,.15);border-color:rgba(34,197,94,.45);color:#4ade80}
.adm-hdr-btn--save:hover{background:rgba(34,197,94,.28);border-color:#4ade80;box-shadow:0 4px 12px rgba(34,197,94,.25)}
.adm-hdr-btn--export{background:rgba(59,130,246,.12);border-color:rgba(59,130,246,.35);color:#60a5fa}
.adm-hdr-btn--export:hover{background:rgba(59,130,246,.22);border-color:#3b82f6;box-shadow:0 4px 12px rgba(59,130,246,.2)}
.adm-hdr-btn--reset{background:rgba(239,68,68,.12);border-color:rgba(239,68,68,.3);color:#fca5a5;padding:8px 12px}
.adm-hdr-btn--reset:hover{background:rgba(239,68,68,.22);box-shadow:0 4px 12px rgba(239,68,68,.2)}
.adm-hdr-btn--exit{background:rgba(255,255,255,.05);border-color:rgba(255,255,255,.12);color:rgba(255,255,255,.55);padding:8px 12px}
.adm-hdr-btn--exit:hover{background:rgba(255,255,255,.1);color:rgba(255,255,255,.8);border-color:rgba(255,255,255,.2)}

/* ── ADMIN STATS BAR ── */
.adm-stats-bar{display:flex;gap:12px;border-bottom:1px solid rgba(255,255,255,.08);background:rgba(0,0,0,.15);flex-shrink:0;overflow-x:auto;scrollbar-width:none;padding:12px 24px;align-items:stretch}
.adm-stats-bar::-webkit-scrollbar{display:none}
.adm-stat{flex:0 0 auto;padding:12px 20px;text-align:center;border-radius:10px;background:rgba(255,255,255,.04);border:1px solid rgba(59,130,246,.15)}
.adm-stat-val{font-family:'Bebas Neue',sans-serif;font-size:1.5rem;color:#60a5fa;line-height:1;font-weight:700}
.adm-stat-label{font-size:.62rem;color:rgba(255,255,255,.45);text-transform:uppercase;letter-spacing:.12em;margin-top:4px;font-weight:600}

/* ── ADMIN SIDEBAR ── */
.adm-sidebar{width:220px;flex-shrink:0;border-right:1px solid rgba(255,255,255,.08);overflow-y:auto;padding:16px 12px;background:#070d1a;scrollbar-width:thin;scrollbar-color:rgba(59,130,246,.3) transparent}
.adm-nav-group{margin-bottom:16px}
.adm-nav-group-label{font-size:.6rem;font-weight:700;text-transform:uppercase;letter-spacing:.15em;color:rgba(255,255,255,.25);padding:10px 14px 6px;margin-top:8px}
.adm-nav-item{padding:10px 14px;font-size:.78rem;font-weight:600;color:rgba(255,255,255,.5);cursor:pointer;border-radius:12px;transition:all .2s;display:flex;align-items:center;gap:10px;margin:3px 0}
.adm-nav-item:hover{color:rgba(255,255,255,.85);background:rgba(59,130,246,.1)}
.adm-nav-item.active{color:#fff;background:linear-gradient(135deg,rgba(59,130,246,.25),rgba(99,102,241,.18));border:1px solid rgba(59,130,246,.3);box-shadow:0 4px 12px rgba(59,130,246,.18)}
.adm-nav-item svg{width:16px;height:16px;flex-shrink:0;opacity:.6}
.adm-nav-item:hover svg{opacity:.8}
.adm-nav-item.active svg{opacity:1}
.adm-nav-count{margin-left:auto;background:rgba(59,130,246,.2);padding:2px 8px;border-radius:8px;font-size:.6rem;color:#93c5fd;font-weight:600}
.adm-nav-item.active .adm-nav-count{background:rgba(59,130,246,.35);color:#dbeafe}
.adm-nav-divider{height:1px;background:rgba(255,255,255,.07);margin:10px 8px}

/* ── ADMIN CONTENT ── */
.adm-content-area{flex:1;overflow-y:auto;padding:24px 28px;scrollbar-width:thin;scrollbar-color:rgba(59,130,246,.3) transparent}
.adm-section-title{font-size:.75rem;font-weight:700;text-transform:uppercase;letter-spacing:.15em;color:rgba(255,255,255,.35);margin-bottom:20px;display:flex;align-items:center;gap:10px}
.adm-section-title::before{content:'';width:4px;height:16px;background:linear-gradient(180deg,#3b82f6,#2563eb);border-radius:3px}

/* ── ADMIN CARDS ── */
.adm-card{background:rgba(15,23,42,0.6);backdrop-filter:blur(8px);border:1px solid rgba(59,130,246,.15);border-radius:16px;padding:0;margin-bottom:18px;overflow:hidden;transition:all .25s}
.adm-card:hover{border-color:rgba(59,130,246,.3);background:rgba(15,23,42,0.75);box-shadow:0 8px 24px rgba(59,130,246,.1)}
.adm-card.search-hidden{display:none}
.adm-card-hdr{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;background:rgba(255,255,255,.03);border-bottom:1px solid rgba(255,255,255,.06);cursor:pointer;transition:background .2s}
.adm-card-hdr:hover{background:rgba(255,255,255,.05)}
.adm-card-title{font-size:.88rem;font-weight:700;color:#fff;display:flex;align-items:center;gap:10px}
.adm-card-title .adm-card-badge{font-size:.62rem;padding:3px 10px;border-radius:8px;font-weight:600;text-transform:uppercase;letter-spacing:.08em;background:rgba(59,130,246,.2);color:#93c5fd}
.adm-card-body{padding:16px 20px}
.adm-card-name-row{display:flex;align-items:center;gap:12px;margin-bottom:14px}
.adm-card-name-row label{font-size:.7rem;color:rgba(255,255,255,.4);white-space:nowrap;font-weight:600;text-transform:uppercase;letter-spacing:.08em}
.adm-card-actions{display:flex;gap:8px}

/* ── ADMIN TABLE ── */
.adm-tbl{width:100%;border-collapse:collapse;background:rgba(255,255,255,.02)}
.adm-tbl th{font-size:.65rem;font-weight:700;text-transform:uppercase;letter-spacing:.1em;color:rgba(255,255,255,.35);padding:10px 12px;border-bottom:1.5px solid rgba(59,130,246,.15);text-align:left;background:rgba(0,0,0,.2)}
.adm-tbl td{padding:8px 12px;border-bottom:1px solid rgba(255,255,255,.04)}
.adm-tbl tr{transition:background .12s}
.adm-tbl tbody tr:hover{background:rgba(59,130,246,.08)}
.adm-tbl tbody tr:nth-child(odd){background:rgba(255,255,255,.01)}

/* ── ADMIN INPUTS ── */
.adm-inp{background:rgba(255,255,255,.06);border:1.5px solid rgba(59,130,246,.2);border-radius:10px;color:#eef4ff;font-family:'DM Sans',sans-serif;font-size:.8rem;padding:8px 12px;width:100%;outline:none;transition:all .18s}
.adm-inp:focus{border-color:#3b82f6;background:rgba(59,130,246,.1);box-shadow:0 0 0 3px rgba(59,130,246,.12)}
.adm-inp:hover{border-color:rgba(59,130,246,.35)}
.adm-num{max-width:90px;text-align:right;font-variant-numeric:tabular-nums}

/* ── ADMIN BUTTONS ── */
.adm-btn-add{background:rgba(59,130,246,.15);border:1.5px solid rgba(59,130,246,.35);color:#60a5fa;padding:6px 16px;border-radius:10px;font-family:'DM Sans',sans-serif;font-size:.72rem;font-weight:700;cursor:pointer;transition:all .2s;display:inline-flex;align-items:center;gap:5px}
.adm-btn-add:hover{background:rgba(59,130,246,.25);border-color:#3b82f6;box-shadow:0 4px 12px rgba(59,130,246,.2)}
.adm-btn-del{background:rgba(239,68,68,.12);border:1.5px solid rgba(239,68,68,.25);color:#fca5a5;padding:6px 10px;border-radius:9px;font-family:'DM Sans',sans-serif;font-size:.72rem;cursor:pointer;transition:all .18s;display:inline-flex;align-items:center;justify-content:center;font-weight:600}
.adm-btn-del:hover{background:rgba(239,68,68,.25);border-color:rgba(239,68,68,.5);box-shadow:0 4px 12px rgba(239,68,68,.15)}
.adm-btn-new-card{background:rgba(34,197,94,.15);border:1.5px solid rgba(34,197,94,.35);color:#4ade80;padding:10px 24px;border-radius:12px;font-family:'DM Sans',sans-serif;font-size:.8rem;font-weight:700;cursor:pointer;margin-top:8px;transition:all .2s;display:inline-flex;align-items:center;gap:7px}
.adm-btn-new-card:hover{background:rgba(34,197,94,.25);border-color:#4ade80;box-shadow:0 4px 12px rgba(34,197,94,.2)}
.adm-loading{color:var(--dim);font-size:.82rem;padding:40px;text-align:center}

/* ── ADMIN RESPONSIVE ── */
@media(max-width:768px){
  .adm-header{flex-direction:column;align-items:flex-start;gap:12px;padding:14px 18px}
  .adm-header-actions{width:100%;overflow-x:auto}
  .adm-sidebar{width:180px;padding:12px 8px}
  .adm-nav-group-label{padding:8px 10px 4px}
  .adm-search-input{width:160px}
  .adm-search-input:focus{width:180px}
  .adm-stats-bar{flex-wrap:wrap;gap:8px;padding:10px 18px}
  .adm-stat{min-width:100px;padding:10px 16px}
  .adm-content-area{padding:18px 20px}
}
@media(max-width:500px){
  .adm-sidebar{width:56px;padding:8px 4px}
  .adm-nav-item{padding:10px 0;justify-content:center;font-size:0;gap:0;border-radius:10px;margin:4px 0}
  .adm-nav-item svg{width:18px;height:18px;opacity:.75}
  .adm-nav-count{display:none}
  .adm-nav-group-label{display:none}
  .adm-nav-divider{margin:8px 2px;height:1px}
  .adm-content-area{padding:14px 12px}
  .adm-login-card{width:100%;max-width:340px;padding:36px 28px}
  .adm-stat{min-width:70px;padding:8px 12px;font-size:.8rem}
  .adm-stat-val{font-size:1.2rem}
  .adm-stat-label{font-size:.55rem}
}
</style>

<script>
const DISC=0.83;

const dp=v=>{const n=parseFloat(v);return(!isNaN(n)&&n>0)?Math.round(n*DISC/5)*5:null};
const $p=(v,c='pr')=>v!==null?`<span class="${c}">$${Number(v).toLocaleString()}</span>`:`<span class="nu">—</span>`;
const sn=v=>{const s=String(v||'').replace(/[$,\s]/g,'');const n=parseFloat(s);return(!isNaN(n)&&n>0)?n:null};

let DATA={
  newPhone:{
    '17pm-ul':{t:'iPhone 17 Pro Max',tp:'ul',r:[['256GB',1185,1125],['512GB',1315,1255],['1TB',1465,1370],['2TB',1695,1610]]},
    '17pm-lk':{t:'iPhone 17 Pro Max',tp:'lk',r:[['256GB',875,855],['512GB',1075,1030],['1TB',1175,1145],['2TB',1275,1245]]},
    '17p-ul': {t:'iPhone 17 Pro',tp:'ul',r:[['256GB',1060,1000],['512GB',1180,1090],['1TB',1370,1305]]},
    '17p-lk': {t:'iPhone 17 Pro',tp:'lk',r:[['256GB',785,765],['512GB',925,905],['1TB',1055,1035]]},
    '17a-ul': {t:'iPhone 17 Air',tp:'ul',r:[['256GB',800,750],['512GB',930,880],['1TB',1040,990]]},
    '17a-lk': {t:'iPhone 17 Air',tp:'lk',r:[['256GB',470,450],['512GB',510,490],['1TB',565,545]]},
    '17-ul':  {t:'iPhone 17',tp:'ul',r:[['256GB',715,665],['512GB',865,815]]},
    '17-lk':  {t:'iPhone 17',tp:'lk',r:[['256GB',540,520],['512GB',660,640]]},
    '16pm-ul':{t:'iPhone 16 Pro Max',tp:'ul',r:[['256GB',940,870],['512GB',1040,970],['1TB',1135,1065]]},
    '16pm-lk':{t:'iPhone 16 Pro Max',tp:'lk',r:[['256GB',690,670],['512GB',760,740],['1TB',830,810]]},
    '16p-ul': {t:'iPhone 16 Pro',tp:'ul',r:[['128GB',760,715],['256GB',850,805],['512GB',930,885],['1TB',1010,965]]},
    '16p-lk': {t:'iPhone 16 Pro',tp:'lk',r:[['128GB',465,445],['256GB',565,545],['512GB',615,595],['1TB',655,635]]},
    '16plus-ul':{t:'iPhone 16 Plus',tp:'ul',r:[['128GB',530,500],['256GB',590,560],['512GB',640,610]]},
    '16plus-lk':{t:'iPhone 16 Plus',tp:'lk',r:[['128GB',330,310],['256GB',380,360],['512GB',420,400]]},
    '16-ul':  {t:'iPhone 16',tp:'ul',r:[['128GB',430,400],['256GB',480,450],['512GB',530,500]]},
    '16-lk':  {t:'iPhone 16',tp:'lk',r:[['128GB',250,230],['256GB',290,270],['512GB',330,310]]},
    '16e-ul': {t:'iPhone 16E',tp:'ul',r:[['128GB',340,310],['256GB',385,355],['512GB',440,410]]},
    '15pm-ul':{t:'iPhone 15 Pro Max',tp:'ul',r:[['256GB',580,540],['512GB',660,620],['1TB',740,700]]},
    '15-ul':  {t:'iPhone 15',tp:'ul',r:[['128GB',290,260],['256GB',360,330],['512GB',420,390]]},
    '14-ul':  {t:'iPhone 14',tp:'ul',r:[['128GB',190,170],['256GB',240,220],['512GB',295,275]]},
  },
  usedPhone:{
    'u17pm-ul':{t:'iPhone 17 Pro Max',tp:'ul',r:[['256GB',1010,980,780,550,180],['512GB',1110,1080,865,650,200],['1TB',1230,1200,970,730,215],['2TB',1410,1380,1120,800,235]]},
    'u17pm-lk':{t:'iPhone 17 Pro Max',tp:'lk',r:[['256GB',800,780,585,330,75],['512GB',995,955,680,350,75],['1TB',1105,1045,730,360,75],['2TB',1205,1135,790,385,75]]},
    'u17p-ul': {t:'iPhone 17 Pro',tp:'ul',r:[['256GB',900,870,695,495,180],['512GB',1030,1000,810,575,225],['1TB',1130,1100,890,640,255]]},
    'u17p-lk': {t:'iPhone 17 Pro',tp:'lk',r:[['256GB',715,685,510,260,55],['512GB',855,825,555,280,55],['1TB',1040,990,615,300,55]]},
    'u17a-ul': {t:'iPhone 17 Air',tp:'ul',r:[['256GB',650,620,485,385,95],['512GB',770,740,570,450,130],['1TB',870,840,655,535,165]]},
    'u17a-lk': {t:'iPhone 17 Air',tp:'lk',r:[['256GB',395,365,270,130,40],['512GB',460,430,300,160,40],['1TB',530,480,380,215,40]]},
    'u17-ul':  {t:'iPhone 17',tp:'ul',r:[['256GB',620,600,470,320,70],['512GB',720,700,550,385,90]]},
    'u17-lk':  {t:'iPhone 17',tp:'lk',r:[['256GB',495,470,330,175,35],['512GB',620,600,435,225,40]]},
    'u16pm-ul':{t:'iPhone 16 Pro Max',tp:'ul',r:[['256GB',820,800,630,465,135],['512GB',920,890,695,530,150],['1TB',1010,980,765,575,170]]},
    'u16pm-lk':{t:'iPhone 16 Pro Max',tp:'lk',r:[['256GB',610,580,435,290,65],['512GB',700,660,500,320,70]]},
    'u16p-ul': {t:'iPhone 16 Pro',tp:'ul',r:[['128GB',660,630,495,350,105],['256GB',730,710,550,390,115],['512GB',810,790,610,440,130],['1TB',900,880,680,495,145]]},
    'u16p-lk': {t:'iPhone 16 Pro',tp:'lk',r:[['128GB',430,410,300,225,50],['256GB',510,490,355,265,50],['512GB',570,540,390,290,55]]},
    'u16-ul':  {t:'iPhone 16',tp:'ul',r:[['128GB',380,360,265,185,45],['256GB',430,410,305,215,50]]},
    'u15pm-ul':{t:'iPhone 15 Pro Max',tp:'ul',r:[['256GB',530,510,400,295,70],['512GB',610,580,450,345,75],['1TB',700,670,525,410,85]]},
    'u15-ul':  {t:'iPhone 15',tp:'ul',r:[['128GB',250,240,180,135,30],['256GB',300,290,220,170,40]]},
    'u14-ul':  {t:'iPhone 14',tp:'ul',r:[['128GB',160,155,120,90,20],['256GB',210,200,155,120,25]]},
    'u16plus-ul':{t:'iPhone 16 Plus',tp:'ul',r:[['128GB',475,465,270,180,30],['256GB',505,495,290,200,30],['512GB',535,525,315,215,30]]},
    'u16plus-lk':{t:'iPhone 16 Plus',tp:'lk',r:[['128GB',330,310,215,130,30],['256GB',360,350,240,145,30],['512GB',400,390,250,160,30]]},
    'u16-lk':{t:'iPhone 16',tp:'lk',r:[['128GB',315,295,205,130,20],['256GB',345,325,230,140,20],['512GB',375,355,250,155,20]]},
    'u15pm-lk':{t:'iPhone 15 Pro Max',tp:'lk',r:[['256GB',395,385,275,145,40],['512GB',425,415,295,165,40],['1TB',455,445,315,175,40]]},
    'u15p-ul':{t:'iPhone 15 Pro',tp:'ul',r:[['128GB',385,375,240,150,30],['256GB',405,395,260,170,30],['512GB',425,415,275,190,30],['1TB',445,435,275,190,30]]},
    'u15p-lk':{t:'iPhone 15 Pro',tp:'lk',r:[['128GB',300,300,205,130,30],['256GB',330,320,225,130,30],['512GB',350,340,240,150,30],['1TB',410,350,265,155,30]]},
    'u15plus-ul':{t:'iPhone 15 Plus',tp:'ul',r:[['128GB',350,340,185,115,25],['256GB',370,360,200,130,25],['512GB',390,380,210,130,25]]},
    'u15plus-lk':{t:'iPhone 15 Plus',tp:'lk',r:[['128GB',260,245,165,100,25],['256GB',290,260,180,110,25],['512GB',290,280,195,115,25]]},
    'u15-lk':{t:'iPhone 15',tp:'lk',r:[['128GB',245,225,155,100,20],['256GB',265,245,180,110,20],['512GB',285,265,195,115,20]]},
    'u14pm-ul':{t:'iPhone 14 Pro Max',tp:'ul',r:[['128GB',355,345,215,145,30],['256GB',375,365,240,160,30],['512GB',395,385,250,165,30],['1TB',415,405,250,190,30]]},
    'u14pm-lk':{t:'iPhone 14 Pro Max',tp:'lk',r:[['128GB',285,265,180,110,30],['256GB',310,290,195,120,30],['512GB',330,310,210,130,30],['1TB',350,340,225,130,30]]},
    'u14p-ul':{t:'iPhone 14 Pro',tp:'ul',r:[['128GB',300,295,190,125,20],['256GB',320,315,210,130,20],['512GB',340,335,220,135,20],['1TB',355,350,220,160,20]]},
    'u14p-lk':{t:'iPhone 14 Pro',tp:'lk',r:[['128GB',255,240,155,95,20],['256GB',280,250,175,105,20],['512GB',295,275,185,110,20],['1TB',305,300,205,120,20]]},
    'u14plus-ul':{t:'iPhone 14 Plus',tp:'ul',r:[['128GB',280,275,125,90,20],['256GB',300,295,135,100,20],['512GB',315,310,135,100,20]]},
    'u14plus-lk':{t:'iPhone 14 Plus',tp:'lk',r:[['128GB',185,170,100,60,20],['256GB',200,190,105,70,20],['512GB',215,210,115,70,20]]},
    'u14-lk':{t:'iPhone 14',tp:'lk',r:[['128GB',165,165,100,65,10],['256GB',175,165,105,70,10],['512GB',190,180,115,75,10]]},
    'u13pm-ul':{t:'iPhone 13 Pro Max',tp:'ul',r:[['128GB',320,310,185,125,20],['256GB',340,330,200,135,20],['512GB',360,350,220,135,20],['1TB',380,370,205,160,20]]},
    'u13pm-lk':{t:'iPhone 13 Pro Max',tp:'lk',r:[['128GB',260,250,155,90,20],['256GB',270,260,165,95,20],['512GB',280,270,175,105,20],['1TB',280,270,175,110,20]]},
    'u13p-ul':{t:'iPhone 13 Pro',tp:'ul',r:[['128GB',275,265,145,105,20],['256GB',295,285,155,115,20],['512GB',315,305,175,115,20],['1TB',320,310,160,130,20]]},
    'u13p-lk':{t:'iPhone 13 Pro',tp:'lk',r:[['128GB',200,190,120,70,20],['256GB',210,200,130,75,20],['512GB',220,210,135,80,20],['1TB',230,220,140,90,20]]},
    'u13-ul':{t:'iPhone 13',tp:'ul',r:[['128GB',210,205,110,85,10],['256GB',230,220,130,90,10],['512GB',240,230,130,90,10]]},
    'u13-lk':{t:'iPhone 13',tp:'lk',r:[['128GB',170,160,90,65,10],['256GB',180,170,100,70,10],['512GB',190,180,100,70,10]]},
    'u13m-ul':{t:'iPhone 13 Mini',tp:'ul',r:[['128GB',180,170,75,40,10],['256GB',190,180,90,55,10],['512GB',200,190,90,55,10]]},
    'u13m-lk':{t:'iPhone 13 Mini',tp:'lk',r:[['128GB',115,105,40,25,10],['256GB',115,115,45,30,10],['512GB',120,120,55,40,10]]},
    'use3-ul':{t:'iPhone SE (3rd Gen)',tp:'ul',r:[['64GB',90,80,20,10,5],['128GB',100,90,30,20,5],['256GB',110,100,40,30,5]]},
    'use3-lk':{t:'iPhone SE (3rd Gen)',tp:'lk',r:[['64GB',55,50,15,10,5],['128GB',60,55,15,10,5],['256GB',65,60,15,10,5]]},
    'u12pm-ul':{t:'iPhone 12 Pro Max',tp:'ul',r:[['128GB',250,235,105,60,15],['256GB',270,255,120,70,15],['512GB',285,270,120,70,15]]},
    'u12pm-lk':{t:'iPhone 12 Pro Max',tp:'lk',r:[['128GB',155,145,90,55,15],['256GB',165,155,100,60,15],['512GB',170,160,100,70,15]]},
    'u12p-ul':{t:'iPhone 12 Pro',tp:'ul',r:[['128GB',200,185,75,50,10],['256GB',215,200,95,65,10],['512GB',230,215,95,65,10]]},
    'u12p-lk':{t:'iPhone 12 Pro',tp:'lk',r:[['128GB',135,125,65,35,10],['256GB',145,135,70,45,10],['512GB',150,140,75,50,10]]},
    'u12-ul':{t:'iPhone 12',tp:'ul',r:[['64GB',140,130,40,30,10],['128GB',155,145,45,30,10],['256GB',165,155,60,40,10]]},
    'u12-lk':{t:'iPhone 12',tp:'lk',r:[['64GB',100,95,45,30,10],['128GB',110,105,55,40,10],['256GB',120,115,60,45,10]]},
    'u12m-ul':{t:'iPhone 12 Mini',tp:'ul',r:[['64GB',120,110,25,15,5],['128GB',135,125,25,15,5],['256GB',145,135,25,15,5]]},
    'u12m-lk':{t:'iPhone 12 Mini',tp:'lk',r:[['64GB',80,80,25,15,5],['128GB',90,90,30,25,5],['256GB',100,100,40,30,5]]},
    'u11pm-ul':{t:'iPhone 11 Pro Max',tp:'ul',r:[['64GB',185,180,75,45,5],['256GB',205,200,95,50,5],['512GB',225,220,110,50,5]]},
    'u11pm-lk':{t:'iPhone 11 Pro Max',tp:'lk',r:[['64GB',110,110,50,30,5],['256GB',120,120,60,40,5],['512GB',130,130,65,50,5]]},
    'u11p-ul':{t:'iPhone 11 Pro',tp:'ul',r:[['64GB',160,155,55,20,5],['256GB',180,175,70,35,5],['512GB',200,195,90,45,5]]},
    'u11p-lk':{t:'iPhone 11 Pro',tp:'lk',r:[['64GB',90,90,40,25,5],['256GB',100,100,50,30,5],['512GB',110,110,60,40,5]]},
    'u11-ul':{t:'iPhone 11',tp:'ul',r:[['64GB',125,115,40,10,5],['128GB',140,130,50,25,5],['256GB',150,140,60,30,5]]},
    'u11-lk':{t:'iPhone 11',tp:'lk',r:[['64GB',95,95,40,25,5],['128GB',100,100,50,30,5],['256GB',105,105,60,40,5]]},
  },
  newIpad:{
    'np13m5w':{t:'iPad Pro 13" — M5 8th Gen (2025)',tp:'wifi',r:[['256GB',1030,930],['512GB',1230,1130],['1TB',1380,1280],['2TB',1480,1380]]},
    'np13m5c':{t:'iPad Pro 13" — M5 8th Gen (2025)',tp:'cell',r:[['256GB',1030,930],['512GB',1270,1150],['1TB',1420,1320],['2TB',1520,1420]]},
    'np13m4w':{t:'iPad Pro 13" — M4 7th Gen (2024)',tp:'wifi',r:[['256GB',810,690],['512GB',860,760],['1TB',1120,1000],['2TB',1270,1150]]},
    'np13m4c':{t:'iPad Pro 13" — M4 7th Gen (2024)',tp:'cell',r:[['256GB',860,710],['512GB',940,800],['1TB',1140,1010],['2TB',1300,1170]]},
    'np11m5w':{t:'iPad Pro 11" — M5 6th Gen (2025)',tp:'wifi',r:[['256GB',760,660],['512GB',930,830],['1TB',1090,990],['2TB',1200,1100]]},
    'np11m4w':{t:'iPad Pro 11" — M4 5th Gen (2024)',tp:'wifi',r:[['256GB',610,510],['512GB',750,630],['1TB',890,770],['2TB',1000,880]]},
    'na13m3w':{t:'iPad Air 13" — M3 (2025)',tp:'wifi',r:[['128GB',540,440],['256GB',670,570],['512GB',840,740]]},
    'na11m3w':{t:'iPad Air 11" — M3 (2025)',tp:'wifi',r:[['128GB',390,290],['256GB',520,420],['512GB',670,570]]},
    'n10w':   {t:'iPad 10th Gen (2022)',tp:'wifi',r:[['64GB',220,190],['256GB',310,280]]},
    'n9':     {t:'iPad 9th Gen (2021)',tp:'wifi',r:[['64GB',130,110],['256GB',200,180]]},
  },
  usedIpad:{
    'up13m4w':{t:'iPad Pro 13" — M4 (2024)',tp:'wifi',r:[['256GB',695,675,640,450,300],['512GB',775,755,720,450,300],['1TB',865,845,810,450,300],['2TB',970,950,915,450,300]]},
    'up13m4c':{t:'iPad Pro 13" — M4 (2024)',tp:'cell',r:[['256GB',695,675,640,450,300],['512GB',775,755,720,450,300],['1TB',865,845,810,450,300],['2TB',970,950,915,450,300]]},
    'up11m4w':{t:'iPad Pro 11" — M4 (2024)',tp:'wifi',r:[['256GB',560,540,510,360,220],['512GB',640,620,590,420,250],['1TB',720,700,670,480,280]]},
    'ua13m2w':{t:'iPad Air 13" — M2 (2024)',tp:'wifi',r:[['128GB',420,400,370,280,160],['256GB',500,480,450,340,190]]},
    'ua11m2w':{t:'iPad Air 11" — M2 (2024)',tp:'wifi',r:[['128GB',290,275,250,185,110],['256GB',360,345,310,240,140]]},
  },
  macbook:{
    'mba13m4':{t:'MacBook Air 13.6" — M4 (2025)',r:[['256GB / 16GB RAM',710,620],['512GB / 16GB RAM',870,780],['512GB / 24GB RAM',1080,990]]},
    'mba15m4':{t:'MacBook Air 15.3" — M4 (2025)',r:[['256GB / 16GB RAM',870,780],['512GB / 16GB RAM',1050,960],['512GB / 24GB RAM',1250,1160]]},
    'mbp16m4':{t:'MacBook Pro 16" — M4 (2024)',r:[['512GB 14C/20G/24GB',1870,1760],['512GB 14C/20G/48GB',2320,2210],['1TB 14C/32G/36GB',2580,2270],['1TB 16C/40G/48GB',3140,2880]]},
    'mbp14m5':{t:'MacBook Pro 14" — M5 (2025)',r:[['512GB 10C/10G/16GB',1300,1190],['1TB 10C/10G/16GB',1460,1350],['1TB 10C/10G/24GB',1640,1530]]},
    'mbp14m4':{t:'MacBook Pro 14" — M4 (2024)',r:[['512GB 10C/10G/16GB',1220,1110],['1TB 10C/10G/16GB',1200,1090],['512GB 12C/16G/24GB',1560,1450],['1TB 10C/10G/24GB',1490,1380],['1TB 14C/20G/24GB',1880,1770],['1TB 14C/32G/36GB',2410,2300]]},
    'mba13m3':{t:'MacBook Air 13" — M3 (2024)',r:[['256GB / 8GB RAM',570,480],['512GB / 8GB RAM',610,520],['512GB / 16GB RAM',730,550]]},
    'mba15m3':{t:'MacBook Air 15" — M3 (2024)',r:[['256GB / 8GB RAM',640,550],['512GB / 8GB RAM',750,660],['512GB / 16GB RAM',830,740]]},
  },
  samsung:{
    'S25 Series':[
      ['S25 Ultra','Unlocked',null,610,590],['S25 Ultra','AT&T',445,415,390],['S25 Ultra','Carrier Locked',445,415,390],
      ['S25 Edge','Unlocked',null,460,420],['S25 Edge','AT&T',250,210,160],['S25 Edge','Carrier Locked',250,210,160],
      ['S25 Plus','Unlocked',null,360,340],['S25 Plus','AT&T',295,265,235],['S25 Plus','Carrier Locked',295,265,235],
      ['S25','Unlocked',null,250,240],['S25','AT&T',190,190,175],['S25','Carrier Locked',190,190,175]],
    'S24 Series':[
      ['S24 Ultra','Unlocked',550,430,420],['S24 Ultra','AT&T',365,335,305],['S24 Ultra','Carrier Locked',365,335,305],
      ['S24 Plus','Unlocked',330,260,245],['S24 Plus','AT&T',215,190,180],['S24 Plus','Carrier Locked',215,190,180],
      ['S24','Unlocked',250,200,195],['S24','AT&T',145,150,130],['S24','Carrier Locked',145,150,130]],
    'S23 Series':[
      ['S23 Ultra','Unlocked',240,190,170],['S23 Ultra','AT&T',110,120,110],['S23 Ultra','Carrier Locked',110,120,110],
      ['S23 Plus','Unlocked',null,205,190],['S23 Plus','AT&T',null,160,145],['S23 Plus','Carrier Locked',null,160,145],
      ['S23','Unlocked',null,150,130],['S23','AT&T',null,95,75],['S23','Carrier Locked',null,95,75]],
    'S22 Series':[
      ['S22 Ultra','Unlocked',null,135,120],['S22 Ultra','AT&T',null,85,65],['S22 Ultra','Carrier Locked',null,85,65],
      ['S22 Plus','Unlocked',null,160,145],['S22 Plus','AT&T',null,110,95],['S22 Plus','Carrier Locked',null,110,95],
      ['S22','Unlocked',null,125,110],['S22','AT&T',null,70,50],['S22','Carrier Locked',null,70,50]],
    'S21 Series':[
      ['S21 Ultra','Unlocked',null,105,95],['S21 Ultra','AT&T',null,55,35],['S21 Ultra','Carrier Locked',null,55,35],
      ['S21 Plus','AT&T',null,115,105],['S21 Plus','Carrier Locked',null,115,105],
      ['S21','AT&T',null,60,50],['S21','Carrier Locked',null,60,50]],
    'Note Series':[
      ['Note 20 Ultra','AT&T',null,90,60],['Note 20 Ultra','Carrier Locked',null,90,60],
      ['Note 20','AT&T',null,70,55],['Note 20','Carrier Locked',null,70,55]],
    'Galaxy Z Fold':[
      ['Z Fold 7','Unlocked',850,850,800],['Z Fold 7','AT&T',700,605,605],['Z Fold 7','Carrier Locked',740,645,645],
      ['Z Fold 6','Unlocked',675,510,495],['Z Fold 6','AT&T',440,400,360],['Z Fold 6','Carrier Locked',440,400,360],
      ['Z Fold 5','Unlocked',340,310,300],['Z Fold 5','AT&T',325,235,210],['Z Fold 5','Carrier Locked',325,235,210],
      ['Z Fold 4','Unlocked',null,250,235],['Z Fold 4','AT&T',null,205,180],['Z Fold 4','Carrier Locked',null,205,180],
      ['Z Fold 3','Unlocked',410,305,280],['Z Fold 3','AT&T',275,275,230],['Z Fold 3','Carrier Locked',275,275,230]],
    'Galaxy Z Flip':[
      ['Z Flip 7','AT&T',200,205,160],['Z Flip 7','Carrier Locked',200,205,160],
      ['Z Flip 6','Unlocked',360,260,255],['Z Flip 6','AT&T',145,145,125],['Z Flip 6','Carrier Locked',145,145,125],
      ['Z Flip 5','Unlocked',null,235,210],['Z Flip 5','AT&T',100,85,65],['Z Flip 5','Carrier Locked',100,85,65],
      ['Z Flip 4','Unlocked',null,165,145],['Z Flip 4','AT&T',null,65,45],['Z Flip 4','Carrier Locked',null,65,45],
      ['Z Flip 3','Unlocked',290,230,220],['Z Flip 3','AT&T',130,130,120],['Z Flip 3','Carrier Locked',130,130,120]],
  },
  watch:{
    'Apple Watch Ultra':[
      ['Ultra 3 (2025) — Milanese Loop',740,680,395,375],
      ['Ultra 3 (2025) — 49MM',630,570,395,375],
      ['Ultra 2 (2024) — Milanese Loop',490,430,null,null],
      ['Ultra 2 (2024) — 49MM',460,400,275,255],
      ['Ultra 2 (2023)',440,380,260,235],
      ['Ultra (Original)',280,220,null,null]],
    'Apple Watch Series 11':[
      ['Series 11 — 46MM GPS',310,250,200,180],
      ['Series 11 — 42MM GPS',285,225,180,160],
      ['Series 11 — 46MM GPS+4G',315,255,200,180],
      ['Series 11 — 42MM GPS+4G',290,230,180,160]],
    'Apple Watch Series 10':[
      ['Series 10 — 45MM',260,200,150,140],
      ['Series 10 — 41MM',240,180,140,120]],
    'Apple Watch Series 9':[
      ['Series 9 — 45MM',170,100,125,115],
      ['Series 9 — 41MM',140,70,110,100]],
    'Apple Watch SE':[
      ['SE 3 — GPS 44MM',210,150,145,135],
      ['SE 3 — GPS 40MM',175,115,130,120],
      ['SE 3 — GPS+4G 44MM',210,150,145,135],
      ['SE 3 — GPS+4G 40MM',175,115,130,120],
      ['SE 2nd Gen — 44MM',145,110,80,70],
      ['SE 2nd Gen — 40MM',115,80,70,60]],
  },
  airpods:{
    'AirPods Pro':[
      ['AirPods Pro 3rd Gen (2025)',185],
      ['AirPods Pro 2nd Gen USB-C — MTJV3AM',135],
      ['AirPods Pro 2nd Gen Lightning — MQD83AM',135],
      ['AirPods Pro MagSafe 2021 — MLWK3AM',115],
      ['AirPods Pro Original — MWP22AM',110]],
    'AirPods Max':[
      ['AirPods Max (USB-C)',385],
      ['AirPods Max (Lightning)',345]],
    'AirPods':[
      ['AirPods 4 — Active Noise Cancellation',110],
      ['AirPods 4 — MXP63LL',75],
      ['AirPods 3 — MagSafe MME73AM',62],
      ['AirPods 3 — Lightning MPNY3AM',62],
      ['AirPods 2 — Wireless MRXJ2AM',70],
      ['AirPods 2 — Wired MV7N2AM',50],
      ['AirPods 1 — MMEF2AM',45]],
  },
};

// ── DEDUCTIONS (OL Global raw amounts per model) ──
const DEDUCTIONS={
  // iPhone 17 series + 16 Pro Max — same deduction table
  'u17pm': [['MDM Locked','-$200'],['Unknown Parts Message','-$80'],['Face ID / Touch ID Failure','-$400'],['Aftermarket Battery / Message','-$50'],['Bad Front Camera (×1)','-$100'],['Two Bad Cameras (×2)','-$200'],['Bad Charging Port','-$200'],['Cracked Camera Lens','-$80'],['Cracked Back (camera must work)','-$190'],['Genuine Display Message','-$40'],['Genuine Battery Message','-$40'],['Genuine Camera Message','-$40']],
  'u17p':  [['MDM Locked','-$200'],['Unknown Parts Message','-$80'],['Face ID / Touch ID Failure','-$400'],['Aftermarket Battery / Message','-$50'],['Bad Front Camera (×1)','-$100'],['Two Bad Cameras (×2)','-$200'],['Bad Charging Port','-$200'],['Cracked Camera Lens','-$80'],['Cracked Back (camera must work)','-$190'],['Genuine Display Message','-$40'],['Genuine Battery Message','-$40'],['Genuine Camera Message','-$40']],
  'u17a':  [['MDM Locked','-$200'],['Unknown Parts Message','-$80'],['Face ID / Touch ID Failure','-$400'],['Aftermarket Battery / Message','-$50'],['Bad Front Camera (×1)','-$100'],['Two Bad Cameras (×2)','-$200'],['Bad Charging Port','-$200'],['Cracked Camera Lens','-$80'],['Cracked Back (camera must work)','-$190'],['Genuine Display Message','-$40'],['Genuine Battery Message','-$40'],['Genuine Camera Message','-$40']],
  'u17':   [['MDM Locked','-$200'],['Unknown Parts Message','-$80'],['Face ID / Touch ID Failure','-$400'],['Aftermarket Battery / Message','-$50'],['Bad Front Camera (×1)','-$100'],['Two Bad Cameras (×2)','-$200'],['Bad Charging Port','-$200'],['Cracked Camera Lens','-$80'],['Cracked Back (camera must work)','-$190'],['Genuine Display Message','-$40'],['Genuine Battery Message','-$40'],['Genuine Camera Message','-$40']],
  'u16pm': [['MDM Locked','-$200'],['Unknown Parts Message','-$80'],['Face ID / Touch ID Failure','-$400'],['Aftermarket Battery / Message','-$50'],['Bad Front Camera (×1)','-$100'],['Two Bad Cameras (×2)','-$200'],['Bad Charging Port','-$200'],['Cracked Camera Lens','-$80'],['Cracked Back (camera must work)','-$150'],['Genuine Display Message','-$40'],['Genuine Battery Message','-$40'],['Genuine Camera Message','-$40']],
  // iPhone 16 Pro / 16 Plus / 16
  'u16p':    [['MDM Locked','-$180'],['Unknown Parts Message','-$60'],['Face ID / Touch ID Failure','-$300'],['Aftermarket Battery / Message','-$40'],['Bad Front Camera (×1)','-$100'],['Two Bad Cameras (×2)','-$160'],['Bad Charging Port','-$150'],['Cracked Camera Lens','-$60'],['Cracked Back (camera must work)','-$120'],['Genuine Display Message','-$30'],['Genuine Battery Message','-$30'],['Genuine Camera Message','-$30']],
  'u16plus': [['MDM Locked','-$180'],['Unknown Parts Message','-$60'],['Face ID / Touch ID Failure','-$300'],['Aftermarket Battery / Message','-$40'],['Bad Front Camera (×1)','-$100'],['Two Bad Cameras (×2)','-$160'],['Bad Charging Port','-$150'],['Cracked Camera Lens','-$60'],['Cracked Back (camera must work)','-$120'],['Genuine Display Message','-$30'],['Genuine Battery Message','-$30'],['Genuine Camera Message','-$30']],
  'u16':     [['MDM Locked','-$180'],['Unknown Parts Message','-$60'],['Face ID / Touch ID Failure','-$300'],['Aftermarket Battery / Message','-$40'],['Bad Front Camera (×1)','-$100'],['Two Bad Cameras (×2)','-$160'],['Bad Charging Port','-$150'],['Cracked Camera Lens','-$60'],['Cracked Back (camera must work)','-$120'],['Genuine Display Message','-$30'],['Genuine Battery Message','-$30'],['Genuine Camera Message','-$30']],
  // iPhone 16e
  'u16e': [['Cracked Back','-$200'],['Cracked Camera Lens','-$80'],['Face ID Failure (or sell at DOA)','-$500'],['Aftermarket Battery / Message','-$105'],['Bad Camera (×1)','-$150'],['Two Bad Cameras (×2)','-$200'],['WiFi / Switch / Volume / Bluetooth (each)','-$80'],['Bad Charging Port','-$150']],
  // iPhone 15 Pro Max
  'u15pm': [['Cracked Back','-$180'],['Cracked Camera Lens','-$80'],['Face ID Failure (or sell at DOA)','-$400'],['Aftermarket Battery / Message','-$85'],['Bad Camera (×1)','-$60'],['Two Bad Cameras (×2)','-$120'],['WiFi / Switch / Volume / Bluetooth (each)','-$80'],['Bad Charging Port','-$150']],
  // iPhone 15 Pro
  'u15p':  [['Cracked Back','-$180'],['Cracked Camera Lens','-$60'],['Face ID Failure (or sell at DOA)','-$400'],['Aftermarket Battery / Message','-$85'],['Bad Camera (×1)','-$60'],['Two Bad Cameras (×2)','-$120'],['WiFi / Switch / Volume / Bluetooth (each)','-$80'],['Bad Charging Port','-$150']],
  // iPhone 15 Plus
  'u15plus':[['Cracked Back','-$180'],['Cracked Camera Lens','-$60'],['Face ID Failure (or sell at DOA)','-$400'],['Aftermarket Battery / Message','-$85'],['Bad Camera (×1)','-$60'],['Two Bad Cameras (×2)','-$120'],['WiFi / Switch / Volume / Bluetooth (each)','-$80'],['Bad Charging Port','-$150']],
  // iPhone 15
  'u15':   [['Cracked Back','-$120'],['Cracked Camera Lens','-$80'],['Face ID Failure (or sell at DOA)','-$260'],['Aftermarket Battery / Message','-$90'],['Bad Camera (×1)','-$120'],['Two Bad Cameras (×2)','-$180'],['WiFi / Switch / Volume / Bluetooth (each)','-$80'],['Bad Charging Port','-$160']],
  // iPhone 14 Pro Max
  'u14pm': [['Cracked Back','-$120'],['Cracked Camera Lens','-$60'],['Face ID Failure (or sell at DOA)','-$260'],['Aftermarket Battery / Message','-$90'],['Bad Camera (×1)','-$120'],['Two Bad Cameras (×2)','-$180'],['WiFi / Switch / Volume / Bluetooth (each)','-$80'],['Bad Charging Port','-$160']],
  // iPhone 14 Pro
  'u14p':  [['Cracked Back','-$100'],['Cracked Camera Lens','-$50'],['Face ID Failure (or sell at DOA)','-$240'],['Aftermarket Battery / Message','-$80'],['Bad Camera (×1)','-$80'],['Two Bad Cameras (×2)','-$160'],['WiFi / Switch / Volume / Bluetooth (each)','-$80'],['Bad Charging Port','-$160']],
  // iPhone 14 Plus
  'u14plus':[['Cracked Back','-$100'],['Cracked Camera Lens','-$50'],['Face ID Failure (or sell at DOA)','-$240'],['Aftermarket Battery / Message','-$80'],['Bad Camera (×1)','-$80'],['Two Bad Cameras (×2)','-$160'],['WiFi / Switch / Volume / Bluetooth (each)','-$80'],['Bad Charging Port','-$160']],
  // iPhone 14
  'u14':   [['Cracked Back','-$90'],['Cracked Camera Lens','-$50'],['Face ID Failure (or sell at DOA)','-$250'],['Aftermarket Battery / Message','-$85'],['Bad Camera (×1)','-$100'],['Two Bad Cameras (×2)','-$150'],['WiFi / Switch / Volume / Bluetooth (each)','-$80'],['Bad Charging Port','-$120']],
  // iPhone 13 Pro Max
  'u13pm': [['Cracked Back','-$90'],['Cracked Camera Lens','-$50'],['Face ID Failure (or sell at DOA)','-$250'],['Aftermarket Battery / Message','-$85'],['Bad Camera (×1)','-$100'],['Two Bad Cameras (×2)','-$150'],['WiFi / Switch / Volume / Bluetooth (each)','-$80'],['Bad Charging Port','-$120']],
  // iPhone 13 Pro
  'u13p':  [['Cracked Back','-$60'],['Cracked Camera Lens','-$40'],['Face ID Failure (or sell at DOA)','-$160'],['Aftermarket Battery / Message','-$80'],['Bad Camera (×1)','-$60'],['Two Bad Cameras (×2)','-$80'],['WiFi / Switch / Volume / Bluetooth (each)','-$80'],['Bad Charging Port','-$100']],
  // iPhone 13 / 13 Plus
  'u13':   [['Cracked Back','-$60'],['Cracked Camera Lens','-$40'],['Face ID Failure (or sell at DOA)','-$160'],['Aftermarket Battery / Message','-$80'],['Bad Camera (×1)','-$60'],['Two Bad Cameras (×2)','-$80'],['WiFi / Switch / Volume / Bluetooth (each)','-$80'],['Bad Charging Port','-$100']],
  // iPhone 13 Mini
  'u13m':  [['Cracked Back','-$50'],['Cracked Camera Lens','-$20'],['Face ID Failure (or sell at DOA)','-$60'],['Aftermarket Battery / Message','-$40'],['Bad Camera (×1)','-$40'],['Two Bad Cameras (×2)','-$60'],['WiFi / Switch / Volume / Bluetooth (each)','-$30']],
  // iPhone SE 3rd Gen
  'use3':  [['Cracked Back','-$60'],['Cracked Camera Lens','-$40'],['Face ID Failure (or sell at DOA)','-$140'],['Aftermarket Battery / Message','-$80'],['Bad Camera (×1)','-$60'],['Two Bad Cameras (×2)','-$80'],['WiFi / Switch / Volume / Bluetooth (each)','-$70']],
  // iPhone 12 Pro Max
  'u12pm': [['Cracked Back','-$60'],['Cracked Camera Lens','-$40'],['Face ID Failure (or sell at DOA)','-$140'],['Aftermarket Battery / Message','-$80'],['Bad Camera (×1)','-$60'],['Two Bad Cameras (×2)','-$80'],['WiFi / Switch / Volume / Bluetooth (each)','-$70']],
  // iPhone 12 Pro
  'u12p':  [['Cracked Back','-$50'],['Cracked Camera Lens','-$30'],['Face ID Failure (or sell at DOA)','-$130'],['Aftermarket Battery / Message','-$70'],['Bad Camera (×1)','-$40'],['Two Bad Cameras (×2)','-$60'],['WiFi / Switch / Volume / Bluetooth (each)','-$50']],
  // iPhone 12 / 12 Mini
  'u12':   [['Cracked Back','-$50'],['Cracked Camera Lens','-$30'],['Face ID Failure (or sell at DOA)','-$130'],['Aftermarket Battery / Message','-$70'],['Bad Camera (×1)','-$40'],['Two Bad Cameras (×2)','-$60'],['WiFi / Switch / Volume / Bluetooth (each)','-$50']],
  'u12m':  [['Cracked Back','-$40'],['Cracked Camera Lens','-$40'],['Face ID Failure (or sell at DOA)','-$100'],['Aftermarket Battery / Message','-$50'],['Bad Camera (×1)','-$60'],['Two Bad Cameras (×2)','-$120'],['WiFi / Switch / Volume / Bluetooth (each)','-$40']],
  // iPhone 11 Pro Max
  'u11pm': [['Cracked Back','-$40'],['Cracked Camera Lens','-$40'],['Face ID Failure (or sell at DOA)','-$100'],['Aftermarket Battery / Message','-$50'],['Bad Camera (×1)','-$60'],['Two Bad Cameras (×2)','-$120'],['WiFi / Switch / Volume / Bluetooth (each)','-$40']],
  // iPhone 11 Pro
  'u11p':  [['Cracked Back','-$50'],['Cracked Camera Lens','-$20'],['Face ID Failure (or sell at DOA)','-$130'],['Aftermarket Battery / Message','-$55'],['Bad Camera (×1)','-$40'],['Two Bad Cameras (×2)','-$80'],['WiFi / Switch / Volume / Bluetooth (each)','-$40']],
  // iPhone 11
  'u11':   [['Cracked Back','-$50'],['Cracked Camera Lens','-$20'],['Face ID Failure (or sell at DOA)','-$60'],['Aftermarket Battery / Message','-$40'],['Bad Camera (×1)','-$40'],['Two Bad Cameras (×2)','-$60'],['WiFi / Switch / Volume / Bluetooth (each)','-$30']],
};

function toggleDed(btn){
  btn.classList.toggle('open');
  const panel=btn.nextElementSibling;
  panel.classList.toggle('open');
  btn.querySelector('.ded-arrow').textContent=panel.classList.contains('open')?'▲':'▼';
}

function dedSection(key){
  // Strip -ul or -lk suffix to get base key
  const base=key.replace(/-(?:ul|lk)$/,'');
  const items=DEDUCTIONS[base];
  if(!items) return '';
  const rows=items.map(([label,amt])=>`<div class="ded-label">${label}</div><div class="ded-amt">${amt}</div>`).join('');
  return `<button class="ded-btn" onclick="toggleDed(this)"><span>Deductions</span><span class="ded-arrow">▼</span></button><div class="ded-panel"><div class="ded-grid">${rows}</div><div class="ded-note">Heavy scratching or degraded battery % = extra deduction or Grade C.</div></div>`;
}

const bc=tp=>tp==='wifi'?'b-wifi':tp==='cell'?'b-cell':tp==='ul'?'b-ul':'b-lk';
const bl=tp=>tp==='wifi'?'WiFi':tp==='cell'?'Cellular':tp==='ul'?'UNLOCKED':'SIM LOCKED';

function toggleSell(btn){
  window.location.href='tel:+19017131565';
}
const sellBtn=(name)=>'';

function nPhoneCard(d){
  const isLk=d.tp==='lk';
  const hbg=isLk?'rgba(239,68,68,.055)':'rgba(34,197,94,.05)';
  const rows=d.r.map(([c,s,o])=>`<tr><td class="cap">${c}</td><td>${$p(dp(s))}</td><td>${$p(dp(o),'pr2')}</td></tr>`).join('');
  return`<div class="card-full"><div class="cfhdr" style="background:${hbg}"><h3>${d.t}</h3><div style="display:flex;align-items:center;gap:6px"><span class="badge ${bc(d.tp)}">${bl(d.tp)}</span>${isLk&&d.nt?`<span style="font-size:.63rem;color:var(--dim2);font-style:italic">${d.nt}</span>`:''}</div></div><div class="tbl-wrap"><table class="tbl"><thead><tr><th>Storage</th><th>Sealed</th><th>Open</th></tr></thead><tbody>${rows}</tbody></table></div>${sellBtn(d.t)}</div>`;
}

function uPhoneCard(d, key){
  const isLk=d.tp==='lk';
  const hbg=isLk?'rgba(239,68,68,.055)':'rgba(34,197,94,.05)';
  const rows=d.r.map(([c,h,b,cc,dd,doa])=>`<tr><td class="cap">${c}</td><td>${$p(dp(h))}</td><td>${$p(dp(b),'pr2')}</td><td>${$p(dp(cc),'pr2')}</td><td>${$p(dp(dd),'pr2')}</td><td>${$p(dp(doa),'pr2')}</td></tr>`).join('');
  const ded=dedSection(key||'');
  return`<div class="card-full"><div class="cfhdr" style="background:${hbg}"><h3>${d.t}</h3><span class="badge ${bc(d.tp)}">${bl(d.tp)}</span></div><div class="tbl-wrap"><table class="tbl"><thead><tr><th>Storage</th><th><span class="gp g-hso">HSO</span></th><th><span class="gp g-b">B</span></th><th><span class="gp g-c">C</span></th><th><span class="gp g-d">D</span></th><th><span class="gp g-doa">DOA</span></th></tr></thead><tbody>${rows}</tbody></table></div>${ded}${sellBtn(d.t)}</div>`;
}


function renderNI(){
  document.getElementById('ni-ul-blocks').innerHTML=Object.entries(DATA.newPhone).filter(([k,d])=>d.tp==='ul').map(([k,d])=>nPhoneCard(d)).join('');
  document.getElementById('ni-lk-blocks').innerHTML=Object.entries(DATA.newPhone).filter(([k,d])=>d.tp==='lk').map(([k,d])=>nPhoneCard(d)).join('');
}
function renderUI(){
  document.getElementById('ui-ul-blocks').innerHTML=Object.entries(DATA.usedPhone).filter(([k,d])=>d.tp==='ul').map(([k,d])=>uPhoneCard(d,k)).join('');
  document.getElementById('ui-lk-blocks').innerHTML=Object.entries(DATA.usedPhone).filter(([k,d])=>d.tp==='lk').map(([k,d])=>uPhoneCard(d,k)).join('');
}
function renderNIpad(){
  document.getElementById('nipad-cards').innerHTML=Object.entries(DATA.newIpad).map(([k,d])=>`<div class="card-full"><div class="cfhdr"><h3>${d.t}</h3><span class="badge ${bc(d.tp)}">${bl(d.tp)}</span></div><div class="tbl-wrap"><table class="tbl"><thead><tr><th>Storage</th><th>Sealed</th><th>Open</th></tr></thead><tbody>${d.r.map(([c,s,o])=>`<tr><td class="cap">${c}</td><td>${$p(dp(s))}</td><td>${$p(dp(o),'pr2')}</td></tr>`).join('')}</tbody></table></div>${sellBtn(d.t)}</div>`).join('');
}
function renderUIpad(){
  document.getElementById('uipad-cards').innerHTML=Object.entries(DATA.usedIpad).map(([k,d])=>`<div class="card-full"><div class="cfhdr"><h3>${d.t}</h3><span class="badge ${bc(d.tp)}">${bl(d.tp)}</span></div><div class="tbl-wrap"><table class="tbl"><thead><tr><th>Storage</th><th><span class="gp g-a">A</span></th><th><span class="gp g-a">B+</span></th><th><span class="gp g-b">B</span></th><th><span class="gp g-c">C</span></th><th><span class="gp g-d">D</span></th></tr></thead><tbody>${d.r.map(([c,a,bp,b,cc,dd])=>`<tr><td class="cap">${c}</td><td>${$p(dp(a))}</td><td>${$p(dp(bp),'pr2')}</td><td>${$p(dp(b),'pr2')}</td><td>${$p(dp(cc),'pr2')}</td><td>${$p(dp(dd),'pr2')}</td></tr>`).join('')}</tbody></table></div>${sellBtn(d.t)}</div>`).join('');
}
function renderMac(){
  document.getElementById('mac-cards').innerHTML=Object.entries(DATA.macbook).map(([k,d])=>`<div class="card-full"><div class="cfhdr"><h3>${d.t}</h3></div><div class="tbl-wrap"><table class="tbl"><thead><tr><th>Configuration</th><th>Sealed</th><th>Activated</th></tr></thead><tbody>${d.r.map(([c,s,a])=>`<tr><td style="font-size:.82rem">${c}</td><td>${$p(dp(s))}</td><td>${$p(dp(a),'pr2')}</td></tr>`).join('')}</tbody></table></div>${sellBtn(d.t)}</div>`).join('');
}
// Samsung gets extra -15% on top of the standard -17% → total multiplier = 0.83 × 0.85
const dps=v=>{const n=parseFloat(v);return(!isNaN(n)&&n>0)?Math.round(n*0.83*0.85/5)*5:null};

function renderSam(){
  // Split each series into unlocked and locked cards
  const ulHtml=[], lkHtml=[];

  Object.entries(DATA.samsung).forEach(([title, rows])=>{
    const ulRows=rows.filter(r=>r[1]==='Unlocked');
    const lkRows=rows.filter(r=>r[1]!=='Unlocked');

    const makeCard=(filteredRows, isLk)=>{
      if(!filteredRows.length) return '';
      const hbg=isLk?'rgba(239,68,68,.055)':'rgba(34,197,94,.05)';
      const badge=isLk?'<span class="badge b-lk">SIM LOCKED</span>':'<span class="badge b-ul">UNLOCKED</span>';
      const trs=filteredRows.map(([m,c,nw,ga,gb])=>{
        const carrier=c==='Unlocked'?'':`<span class="cpill c-att" style="font-size:.65rem">${c}</span>`;
        return`<tr>
          <td style="font-weight:600">${m}${carrier?` ${carrier}`:''}</td>
          <td>${nw?$p(dps(nw)):'<span class="nu">—</span>'}</td>
          <td>${$p(dps(ga))}</td>
          <td>${$p(dps(gb),'pr2')}</td>
        </tr>`;
      }).join('');
      return`<div class="card-full"><div class="cfhdr" style="background:${hbg}"><h3>Samsung ${title}</h3>${badge}</div>
        <div class="tbl-wrap"><table class="tbl"><thead><tr><th>Model</th><th>New</th><th><span class="gp g-hso">Grade A</span></th><th><span class="gp g-b">Grade B</span></th></tr></thead><tbody>${trs}</tbody></table></div>${sellBtn('Samsung '+title)}
      </div>`;
    };

    const ulCard=makeCard(ulRows, false);
    const lkCard=makeCard(lkRows, true);
    if(ulCard) ulHtml.push(ulCard);
    if(lkCard) lkHtml.push(lkCard);
  });

  document.getElementById('sam-ul-cards').innerHTML=ulHtml.join('');
  document.getElementById('sam-lk-cards').innerHTML=lkHtml.join('');
}
function renderWatch(){
  document.getElementById('watch-cards').innerHTML=Object.entries(DATA.watch).map(([title,rows])=>{
    const trs=rows.map(([m,s,o,a,b])=>`<tr>
      <td style="font-size:.82rem;font-weight:500">${m}</td>
      <td>${$p(dp(s))}</td>
      <td>${$p(dp(o),'pr2')}</td>
      <td>${a?$p(dp(a)):'<span class="nu">—</span>'}</td>
      <td>${b?$p(dp(b),'pr2'):'<span class="nu">—</span>'}</td>
    </tr>`).join('');
    return`<div class="card-full"><div class="cfhdr" style="background:linear-gradient(135deg,rgba(14,165,233,.15),rgba(6,182,212,.08))"><h3>${title}</h3><span class="badge b-wifi" style="font-size:.6rem">APPLE WATCH</span></div><div class="tbl-wrap"><table class="tbl"><thead><tr><th>Model</th><th>Sealed</th><th>Open</th><th><span class="gp g-hso">A/HSO</span></th><th><span class="gp g-b">B</span></th></tr></thead><tbody>${trs}</tbody></table></div>${sellBtn(title)}</div>`;
  }).join('');
}
function renderAir(){
  document.getElementById('air-cards').innerHTML=Object.entries(DATA.airpods).map(([title,rows])=>{
    const trs=rows.map(([m,p])=>`<tr><td style="font-size:.82rem;font-weight:500">${m}</td><td>${$p(dp(p))}</td></tr>`).join('');
    return`<div class="card-full"><div class="cfhdr" style="background:linear-gradient(135deg,rgba(139,92,246,.15),rgba(168,85,247,.08))"><h3>${title}</h3><span class="badge b-cell" style="font-size:.6rem">AIRPODS</span></div><div class="tbl-wrap"><table class="tbl"><thead><tr><th>Model</th><th>New / Sealed</th></tr></thead><tbody>${trs}</tbody></table></div>${sellBtn(title)}</div>`;
  }).join('');
}
function renderAll(){renderNI();renderUI();renderNIpad();renderUIpad();renderMac();renderSam();renderWatch();renderAir();}

// ── AGREEMENT OVERLAY ──
function acceptAgreement(){
  document.getElementById('agree-overlay').style.display='none';
  sessionStorage.setItem('agreed','1');
}
(function(){
  if(sessionStorage.getItem('agreed')==='1'){
    document.getElementById('agree-overlay').style.display='none';
  } else {
    const body=document.getElementById('agree-body');
    const btn=document.getElementById('agree-btn');
    const note=document.getElementById('agree-note');
    const fill=document.getElementById('agree-progress-fill');
    body.addEventListener('scroll',function(){
      const pct=body.scrollTop/(body.scrollHeight-body.clientHeight)*100;
      fill.style.width=Math.min(pct,100)+'%';
      const atBottom=body.scrollHeight-body.scrollTop-body.clientHeight<30;
      if(atBottom&&btn.disabled){
        btn.disabled=false;
        btn.classList.add('ready');
        note.textContent='You\'ve read the terms — tap to continue';
      }
    });
  }
})();

// ── NAV ──
function showCat(id,el){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.querySelectorAll('.ctab').forEach(t=>t.classList.remove('active'));
  document.getElementById('sec-'+id).classList.add('active');
  el.classList.add('active');
}
function showSub(prefix,id,el){
  const par=el.closest('.section');
  par.querySelectorAll('.subsec').forEach(s=>s.classList.remove('active'));
  par.querySelectorAll('.stab').forEach(t=>{
    t.classList.remove('active','dimmed');
    if(t!==el) t.classList.add('dimmed');
  });
  document.getElementById(prefix+'-'+id).classList.add('active');
  el.classList.add('active');
}

// ── TOAST ──
function toast(msg,type='ok'){
  const t=document.getElementById('toast');
  t.textContent=msg;t.className='show '+type;
  setTimeout(()=>t.className='',5000);
}

// ── INIT ──
renderAll();


// ── BACK TO TOP BUTTON ──
(function(){
  const btt=document.getElementById('btt');
  let ticking=false;
  window.addEventListener('scroll',function(){
    if(!ticking){
      requestAnimationFrame(()=>{
        btt.classList.toggle('show',window.scrollY>400);
        ticking=false;
      });
      ticking=true;
    }
  });
})();

// ── PRICE ESTIMATOR ──
(function(){
  window.estUpdateModels=function(){
    const cat=document.getElementById('est-category').value;
    const modelSel=document.getElementById('est-model');
    const storageSel=document.getElementById('est-storage');
    const condWrap=document.getElementById('est-condition-wrap');
    const result=document.getElementById('est-result');

    modelSel.innerHTML='<option value="">Select model...</option>';
    storageSel.innerHTML='<option value="">Select storage...</option>';
    condWrap.style.display='none';
    result.classList.remove('visible');

    if(!cat||!DATA[cat]) return;

    Object.entries(DATA[cat]).forEach(([key,d])=>{
      const label=d.t+(d.tp?' ('+bl(d.tp)+')':'');
      modelSel.innerHTML+=`<option value="${key}">${label}</option>`;
    });
  };

  window.estUpdateStorage=function(){
    const cat=document.getElementById('est-category').value;
    const key=document.getElementById('est-model').value;
    const storageSel=document.getElementById('est-storage');
    const condWrap=document.getElementById('est-condition-wrap');
    const condSel=document.getElementById('est-condition');
    const result=document.getElementById('est-result');

    storageSel.innerHTML='<option value="">Select storage...</option>';
    result.classList.remove('visible');

    if(!cat||!key||!DATA[cat][key]) return;

    const d=DATA[cat][key];
    d.r.forEach((row,i)=>{
      storageSel.innerHTML+=`<option value="${i}">${row[0]}</option>`;
    });

    // Setup condition options based on category
    if(cat==='usedPhone'){
      condWrap.style.display='block';
      condSel.innerHTML=`
        <option value="1">HSO / A+ Grade</option>
        <option value="2">Grade B</option>
        <option value="3">Grade C</option>
        <option value="4">Grade D</option>
        <option value="5">DOA</option>
      `;
    } else if(cat==='usedIpad'){
      condWrap.style.display='block';
      condSel.innerHTML=`
        <option value="1">Grade A</option>
        <option value="2">Grade B+</option>
        <option value="3">Grade B</option>
        <option value="4">Grade C</option>
        <option value="5">Grade D</option>
      `;
    } else if(cat==='newPhone'||cat==='newIpad'){
      condWrap.style.display='block';
      condSel.innerHTML=`
        <option value="1">Sealed</option>
        <option value="2">Opened / Activated</option>
      `;
    } else if(cat==='macbook'){
      condWrap.style.display='block';
      condSel.innerHTML=`
        <option value="1">Sealed</option>
        <option value="2">Activated</option>
      `;
    } else {
      condWrap.style.display='none';
    }
  };

  window.estUpdatePrice=function(){
    const cat=document.getElementById('est-category').value;
    const key=document.getElementById('est-model').value;
    const storageIdx=document.getElementById('est-storage').value;
    const condIdx=document.getElementById('est-condition').value;
    const result=document.getElementById('est-result');
    const priceEl=document.getElementById('est-price');
    const rangeEl=document.getElementById('est-range');

    if(!cat||!key||storageIdx==='') { result.classList.remove('visible'); return; }

    const row=DATA[cat][key].r[parseInt(storageIdx)];
    if(!row){ result.classList.remove('visible'); return; }

    let rawPrice=null;
    const ci=parseInt(condIdx)||1;

    if(row[ci]!==undefined&&row[ci]!==null){
      rawPrice=row[ci];
    } else if(row[1]!==undefined){
      rawPrice=row[1];
    }

    if(rawPrice===null){ result.classList.remove('visible'); return; }

    // Apply discount
    let finalPrice;
    if(cat==='samsung'){
      finalPrice=Math.round(rawPrice*0.83*0.85/5)*5;
    } else {
      finalPrice=Math.round(rawPrice*0.83/5)*5;
    }

    priceEl.textContent='$'+finalPrice.toLocaleString();
    result.classList.add('visible');

    // Show range if used phone
    if(cat==='usedPhone'||cat==='usedIpad'){
      const best=dp(row[1]);
      const worst=dp(row[row.length-1]);
      rangeEl.innerHTML=`
        <div class="est-range-item"><div class="est-range-label">Best Condition</div><div class="est-range-val" style="color:#4ade80">${best?'$'+best:'—'}</div></div>
        <div class="est-range-item"><div class="est-range-label">Lowest (DOA)</div><div class="est-range-val" style="color:#fca5a5">${worst?'$'+worst:'—'}</div></div>
      `;
    } else {
      rangeEl.innerHTML='';
    }
  };
})();


// ── ADMIN PANEL ──
(function(){
  const ADMIN_HASH='#admin';
  const ADMIN_PASS='406993';
  const STORE_KEY='m901_admin_data';

  // Load saved data from localStorage
  function loadSavedData(){
    try{
      const s=localStorage.getItem(STORE_KEY);
      if(s){
        const saved=JSON.parse(s);
        // Merge saved data into DATA
        if(saved.newPhone) Object.assign(DATA.newPhone, saved.newPhone);
        if(saved.usedPhone) Object.assign(DATA.usedPhone, saved.usedPhone);
        if(saved.newIpad) Object.assign(DATA.newIpad, saved.newIpad);
        if(saved.usedIpad) Object.assign(DATA.usedIpad, saved.usedIpad);
        if(saved.macbook) Object.assign(DATA.macbook, saved.macbook);
        if(saved.samsung) Object.assign(DATA.samsung, saved.samsung);
        if(saved.watch) Object.assign(DATA.watch, saved.watch);
        if(saved.airpods) Object.assign(DATA.airpods, saved.airpods);
        renderAll();
      }
    }catch(e){}
  }
  loadSavedData();

  function saveData(){
    try{
      localStorage.setItem(STORE_KEY, JSON.stringify({
        newPhone:DATA.newPhone, usedPhone:DATA.usedPhone,
        newIpad:DATA.newIpad, usedIpad:DATA.usedIpad,
        macbook:DATA.macbook, samsung:DATA.samsung,
        watch:DATA.watch, airpods:DATA.airpods
      }));
    }catch(e){}
    renderAll();
  }

  function checkHash(){
    if(window.location.hash===ADMIN_HASH){
      showAdminLogin();
    }
  }
  window.addEventListener('hashchange', checkHash);
  checkHash();

  function showAdminLogin(){
    document.getElementById('adm-overlay').style.display='flex';
    setTimeout(()=>document.getElementById('adm-pass-input').focus(),100);
  }

  window.adminLogin=function(){
    const v=document.getElementById('adm-pass-input').value;
    if(v===ADMIN_PASS){
      document.getElementById('adm-login').style.display='none';
      document.getElementById('adm-panel').style.display='flex';
      admRenderNav();
      admRenderStats();
      admShowSection('mercury-sync');
    } else {
      const err=document.getElementById('adm-err');
      err.textContent='Incorrect password';
      err.style.display='block';
      document.getElementById('adm-pass-input').value='';
      document.getElementById('adm-pass-input').focus();
    }
  };

  window.adminLogout=function(){
    document.getElementById('adm-overlay').style.display='none';
    document.getElementById('adm-login').style.display='flex';
    document.getElementById('adm-panel').style.display='none';
    document.getElementById('adm-pass-input').value='';
    document.getElementById('adm-err').style.display='none';
    history.replaceState(null,'',window.location.pathname);
  };

  window.adminClose=function(){
    adminLogout();
  };

  // ── NAV SECTIONS ──
  const phoneIcon='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="5" y="2" width="14" height="20" rx="2"/><line x1="12" y1="18" x2="12.01" y2="18"/></svg>';
  const padIcon='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="2" width="16" height="20" rx="2"/><line x1="12" y1="18" x2="12.01" y2="18"/></svg>';
  const macIcon='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="2" y1="20" x2="22" y2="20"/></svg>';
  const samIcon=phoneIcon;
  const watchIcon='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="7"/><polyline points="12 9 12 12 13.5 13.5"/><path d="M16.51 17.35l-.35 3.83a2 2 0 0 1-2 1.82H9.83a2 2 0 0 1-2-1.82l-.35-3.83M7.49 6.65l.35-3.83A2 2 0 0 1 9.83 1h4.35a2 2 0 0 1 2 1.82l.35 3.83"/></svg>';
  const airIcon='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 18v-6a9 9 0 0 1 18 0v6"/><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3v5z"/><path d="M3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3v5z"/></svg>';
  const syncIcon='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></svg>';
  const SECTIONS=[
    {id:'mercury-sync', label:'Mercury Sync',              icon:syncIcon,  ds:'_sync'},
    {id:'newPhone-ul',  label:'New iPhone — Unlocked',    icon:phoneIcon, ds:'newPhone', tp:'ul'},
    {id:'newPhone-lk',  label:'New iPhone — Sim Locked',  icon:phoneIcon, ds:'newPhone', tp:'lk'},
    {id:'usedPhone-ul', label:'Used iPhone — Unlocked',   icon:phoneIcon, ds:'usedPhone', tp:'ul'},
    {id:'usedPhone-lk', label:'Used iPhone — Sim Locked', icon:phoneIcon, ds:'usedPhone', tp:'lk'},
    {id:'newIpad',      label:'New iPads',                 icon:padIcon,   ds:'newIpad'},
    {id:'usedIpad',     label:'Used iPads',                icon:padIcon,   ds:'usedIpad'},
    {id:'macbook',      label:'MacBooks',                  icon:macIcon,   ds:'macbook'},
    {id:'samsung',      label:'Samsung',                   icon:samIcon,   ds:'samsung'},
    {id:'watch',        label:'Apple Watch',               icon:watchIcon, ds:'watch'},
    {id:'airpods',      label:'AirPods',                   icon:airIcon,   ds:'airpods'},
  ];

  function getCount(id){
    const sec=SECTIONS.find(s=>s.id===id);
    if(!sec) return 0;
    const ds=sec.ds;
    const tp=sec.tp;
    if(ds==='newPhone'||ds==='usedPhone') return Object.values(DATA[ds]).filter(d=>d.tp===tp).length;
    if(ds==='newIpad') return Object.keys(DATA.newIpad).length;
    if(ds==='usedIpad') return Object.keys(DATA.usedIpad).length;
    if(ds==='macbook') return Object.keys(DATA.macbook).length;
    if(ds==='samsung') return Object.values(DATA.samsung).reduce((s,r)=>s+r.length,0);
    if(ds==='watch') return Object.values(DATA.watch).reduce((s,r)=>s+r.length,0);
    if(ds==='airpods') return Object.values(DATA.airpods).reduce((s,r)=>s+r.length,0);
    if(ds==='_sync'){try{var bl=localStorage.getItem('m901_merc_paste');return bl?'✓':'—';}catch(e){return '—';}}
    return 0;
  }

  function admRenderNav(){
    function navItem(s){
      return `<div class="adm-nav-item" id="adm-nav-${s.id}" onclick="admShowSection('${s.id}')">${s.icon}<span>${s.label}</span><span class="adm-nav-count">${getCount(s.id)}</span></div>`;
    }
    var h='';
    // Mercury Sync at top
    var ms=SECTIONS.find(function(s){return s.id==='mercury-sync';});
    if(ms) h+=navItem(ms);
    h+='<div class="adm-nav-divider"></div>';
    // iPhones - Unlocked
    h+='<div class="adm-nav-group"><div class="adm-nav-group-label">iPhone — Unlocked</div>';
    SECTIONS.filter(function(s){return (s.ds==='newPhone'||s.ds==='usedPhone')&&s.tp==='ul';}).forEach(function(s){h+=navItem(s);});
    h+='</div>';
    // iPhones - Sim Locked
    h+='<div class="adm-nav-group"><div class="adm-nav-group-label">iPhone — Sim Locked</div>';
    SECTIONS.filter(function(s){return (s.ds==='newPhone'||s.ds==='usedPhone')&&s.tp==='lk';}).forEach(function(s){h+=navItem(s);});
    h+='</div>';
    h+='<div class="adm-nav-divider"></div>';
    // iPads
    h+='<div class="adm-nav-group"><div class="adm-nav-group-label">iPads</div>';
    SECTIONS.filter(function(s){return s.ds==='newIpad'||s.ds==='usedIpad';}).forEach(function(s){h+=navItem(s);});
    h+='</div>';
    h+='<div class="adm-nav-divider"></div>';
    // Others
    h+='<div class="adm-nav-group"><div class="adm-nav-group-label">Other Devices</div>';
    ['macbook','samsung','watch','airpods'].forEach(function(ds){
      var s=SECTIONS.find(function(sec){return sec.ds===ds;});
      if(s) h+=navItem(s);
    });
    h+='</div>';
    document.getElementById('adm-nav').innerHTML=h;
  }

  function admRenderStats(){
    const totalModels=SECTIONS.reduce((s,sec)=>s+getCount(sec.id),0);
    document.getElementById('adm-stats-bar').innerHTML=`
      <div class="adm-stat"><div class="adm-stat-val">${totalModels}</div><div class="adm-stat-label">Total Listings</div></div>
      <div class="adm-stat"><div class="adm-stat-val">${Object.keys(DATA.newPhone).length+Object.keys(DATA.usedPhone).length}</div><div class="adm-stat-label">iPhones</div></div>
      <div class="adm-stat"><div class="adm-stat-val">${Object.keys(DATA.newIpad).length+Object.keys(DATA.usedIpad).length}</div><div class="adm-stat-label">iPads</div></div>
      <div class="adm-stat"><div class="adm-stat-val">${Object.keys(DATA.macbook).length}</div><div class="adm-stat-label">MacBooks</div></div>
      <div class="adm-stat"><div class="adm-stat-val">${Object.values(DATA.samsung).reduce((s,r)=>s+r.length,0)}</div><div class="adm-stat-label">Samsung</div></div>
      <div class="adm-stat"><div class="adm-stat-val">${Object.values(DATA.watch).reduce((s,r)=>s+r.length,0)+Object.values(DATA.airpods).reduce((s,r)=>s+r.length,0)}</div><div class="adm-stat-label">Watch/Pods</div></div>
    `;
  }

  // ── ADMIN SEARCH ──
  window.admFilterCards=function(q){
    const cards=document.querySelectorAll('#adm-content .adm-card');
    if(!q){cards.forEach(c=>c.classList.remove('search-hidden'));return;}
    const terms=q.toLowerCase().split(/\s+/);
    cards.forEach(c=>{
      const text=c.textContent.toLowerCase();
      c.classList.toggle('search-hidden',!terms.every(t=>text.includes(t)));
    });
  };

  // ── ADMIN EXPORT ──
  window.admExport=function(){
    const blob=new Blob([JSON.stringify(DATA,null,2)],{type:'application/json'});
    const url=URL.createObjectURL(blob);
    const a=document.createElement('a');
    a.href=url;a.download='memphis901-prices-'+new Date().toISOString().slice(0,10)+'.json';
    document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);
    toast('Data exported successfully!','ok');
  };

  window.admShowSection=function(id){
    SECTIONS.forEach(s=>{
      document.getElementById('adm-nav-'+s.id).classList.toggle('active', s.id===id);
    });
    const content=document.getElementById('adm-content');
    content.innerHTML='<div class="adm-loading">Loading...</div>';
    // Clear search
    const searchInp=document.getElementById('adm-search');
    if(searchInp) searchInp.value='';
    setTimeout(()=>{ content.innerHTML=admBuildSection(id); },60);
  };

  function v(x){return x===null||x===undefined||x===''?'':x;}
  // Website price helpers (matches dp/dps on public site)
  // Show discounted website price in admin inputs
  function dpV(val){var n=parseFloat(val);return(!isNaN(n)&&n>0)?Math.round(n*DISC/5)*5:'';}
  function dpsV(val){var n=parseFloat(val);return(!isNaN(n)&&n>0)?Math.round(n*0.83*0.85/5)*5:'';}
  // Reverse: convert web price back to raw for storage (exposed globally for onchange handlers)
  window.undp=function(wp){var n=parseFloat(wp);if(isNaN(n)||n<=0)return null;return Math.round(n/DISC);};
  window.undps=function(wp){var n=parseFloat(wp);if(isNaN(n)||n<=0)return null;return Math.round(n/(0.83*0.85));};

  function admBuildSection(id){
    const sec=SECTIONS.find(s=>s.id===id);
    let html=`<div class="adm-section-title">${sec.label}</div>`;

    // ── NEW iPHONE (filtered by ul/lk) — columns: Storage, Sealed, Open ──
    if(id==='newPhone-ul'||id==='newPhone-lk'){
      const tp=sec.tp;
      Object.entries(DATA.newPhone).filter(([k,d])=>d.tp===tp).forEach(([key,d])=>{
        html+=`<div class="adm-card">
          <div class="adm-card-hdr">
            <div class="adm-card-title">${d.t}</div>
            <button class="adm-btn-add" onclick="admAddRow('newPhone','${key}')">+ Add</button>
          </div>
          <table class="adm-tbl">
            <thead><tr><th>Storage</th><th>Sealed</th><th>Open</th><th></th></tr></thead>
            <tbody>
              ${d.r.map((row,i)=>`<tr>
                <td><input class="adm-inp" value="${v(row[0])}" onchange="DATA.newPhone['${key}'].r[${i}][0]=this.value"/></td>
                <td><input class="adm-inp adm-num" value="${v(dpV(row[1]))}" onchange="DATA.newPhone['${key}'].r[${i}][1]=undp(this.value)"/></td>
                <td><input class="adm-inp adm-num" value="${v(dpV(row[2]))}" onchange="DATA.newPhone['${key}'].r[${i}][2]=undp(this.value)"/></td>
                <td><button class="adm-btn-del" onclick="admDelRow('newPhone','${key}',${i})">✕</button></td>
              </tr>`).join('')}
            </tbody>
          </table>
        </div>`;
      });
      html+=`<button class="adm-btn-new-card" onclick="admAddCard('newPhone','${tp}')">+ New Model</button>`;
    }

    // ── USED iPHONE (filtered by ul/lk) — columns: Storage, HSO, B, C, D, DOA ──
    if(id==='usedPhone-ul'||id==='usedPhone-lk'){
      const tp=sec.tp;
      Object.entries(DATA.usedPhone).filter(([k,d])=>d.tp===tp).forEach(([key,d])=>{
        html+=`<div class="adm-card">
          <div class="adm-card-hdr">
            <div class="adm-card-title">${d.t}</div>
            <button class="adm-btn-add" onclick="admAddRow('usedPhone','${key}')">+ Add</button>
          </div>
          <table class="adm-tbl">
            <thead><tr><th>Storage</th><th>HSO</th><th>B</th><th>C</th><th>D</th><th>DOA</th><th></th></tr></thead>
            <tbody>
              ${d.r.map((row,i)=>`<tr>
                <td><input class="adm-inp" value="${v(row[0])}" onchange="DATA.usedPhone['${key}'].r[${i}][0]=this.value"/></td>
                ${[1,2,3,4,5].map(ci=>`<td><input class="adm-inp adm-num" value="${v(dpV(row[ci]))}" onchange="DATA.usedPhone['${key}'].r[${i}][${ci}]=undp(this.value)"/></td>`).join('')}
                <td><button class="adm-btn-del" onclick="admDelRow('usedPhone','${key}',${i})">✕</button></td>
              </tr>`).join('')}
            </tbody>
          </table>
        </div>`;
      });
      html+=`<button class="adm-btn-new-card" onclick="admAddCard('usedPhone','${tp}')">+ New Model</button>`;
    }

    // ── NEW iPAD — columns: Storage, Sealed, Open ──
    if(id==='newIpad'){
      Object.entries(DATA.newIpad).forEach(([key,d])=>{
        html+=`<div class="adm-card">
          <div class="adm-card-hdr">
            <div class="adm-card-title">${d.t}</div>
            <button class="adm-btn-add" onclick="admAddRow('newIpad','${key}')">+ Add</button>
          </div>
          <table class="adm-tbl">
            <thead><tr><th>Storage</th><th>Sealed</th><th>Open</th><th></th></tr></thead>
            <tbody>
              ${d.r.map((row,i)=>`<tr>
                <td><input class="adm-inp" value="${v(row[0])}" onchange="DATA.newIpad['${key}'].r[${i}][0]=this.value"/></td>
                <td><input class="adm-inp adm-num" value="${v(dpV(row[1]))}" onchange="DATA.newIpad['${key}'].r[${i}][1]=undp(this.value)"/></td>
                <td><input class="adm-inp adm-num" value="${v(dpV(row[2]))}" onchange="DATA.newIpad['${key}'].r[${i}][2]=undp(this.value)"/></td>
                <td><button class="adm-btn-del" onclick="admDelRow('newIpad','${key}',${i})">✕</button></td>
              </tr>`).join('')}
            </tbody>
          </table>
        </div>`;
      });
      html+=`<button class="adm-btn-new-card" onclick="admAddCard('newIpad')">+ New Model</button>`;
    }

    // ── USED iPAD — columns: Storage, A, B+, B, C, D ──
    if(id==='usedIpad'){
      Object.entries(DATA.usedIpad).forEach(([key,d])=>{
        html+=`<div class="adm-card">
          <div class="adm-card-hdr">
            <div class="adm-card-title">${d.t}</div>
            <button class="adm-btn-add" onclick="admAddRow('usedIpad','${key}')">+ Add</button>
          </div>
          <table class="adm-tbl">
            <thead><tr><th>Storage</th><th>A</th><th>B+</th><th>B</th><th>C</th><th>D</th><th></th></tr></thead>
            <tbody>
              ${d.r.map((row,i)=>`<tr>
                <td><input class="adm-inp" value="${v(row[0])}" onchange="DATA.usedIpad['${key}'].r[${i}][0]=this.value"/></td>
                ${[1,2,3,4,5].map(ci=>`<td><input class="adm-inp adm-num" value="${v(dpV(row[ci]))}" onchange="DATA.usedIpad['${key}'].r[${i}][${ci}]=undp(this.value)"/></td>`).join('')}
                <td><button class="adm-btn-del" onclick="admDelRow('usedIpad','${key}',${i})">✕</button></td>
              </tr>`).join('')}
            </tbody>
          </table>
        </div>`;
      });
      html+=`<button class="adm-btn-new-card" onclick="admAddCard('usedIpad')">+ New Model</button>`;
    }

    // ── MacBook — columns: Configuration, Sealed, Activated ──
    if(id==='macbook'){
      Object.entries(DATA.macbook).forEach(([key,d])=>{
        html+=`<div class="adm-card">
          <div class="adm-card-hdr">
            <div class="adm-card-title">${d.t}</div>
            <button class="adm-btn-add" onclick="admAddRow('macbook','${key}')">+ Add</button>
          </div>
          <table class="adm-tbl">
            <thead><tr><th>Configuration</th><th>Sealed</th><th>Activated</th><th></th></tr></thead>
            <tbody>
              ${d.r.map((row,i)=>`<tr>
                <td><input class="adm-inp" value="${v(row[0])}" onchange="DATA.macbook['${key}'].r[${i}][0]=this.value"/></td>
                <td><input class="adm-inp adm-num" value="${v(dpV(row[1]))}" onchange="DATA.macbook['${key}'].r[${i}][1]=undp(this.value)"/></td>
                <td><input class="adm-inp adm-num" value="${v(dpV(row[2]))}" onchange="DATA.macbook['${key}'].r[${i}][2]=undp(this.value)"/></td>
                <td><button class="adm-btn-del" onclick="admDelRow('macbook','${key}',${i})">✕</button></td>
              </tr>`).join('')}
            </tbody>
          </table>
        </div>`;
      });
      html+=`<button class="adm-btn-new-card" onclick="admAddCard('macbook')">+ New Model</button>`;
    }

    // ── SAMSUNG — columns: Model, Carrier, New, Grade A, Grade B ──
    if(id==='samsung'){
      Object.entries(DATA.samsung).forEach(([grp,rows])=>{
        html+=`<div class="adm-card">
          <div class="adm-card-hdr">
            <div class="adm-card-title">${grp}</div>
            <button class="adm-btn-add" onclick="admAddSamRow('${grp}')">+ Add</button>
          </div>
          <table class="adm-tbl">
            <thead><tr><th>Model</th><th>Carrier</th><th>New</th><th>Grade A</th><th>Grade B</th><th></th></tr></thead>
            <tbody>
              ${rows.map((row,i)=>`<tr>
                <td><input class="adm-inp" value="${v(row[0])}" onchange="DATA.samsung['${grp}'][${i}][0]=this.value"/></td>
                <td><input class="adm-inp" value="${v(row[1])}" onchange="DATA.samsung['${grp}'][${i}][1]=this.value"/></td>
                <td><input class="adm-inp adm-num" value="${v(dpsV(row[2]))}" onchange="DATA.samsung['${grp}'][${i}][2]=undps(this.value)"/></td>
                <td><input class="adm-inp adm-num" value="${v(dpsV(row[3]))}" onchange="DATA.samsung['${grp}'][${i}][3]=undps(this.value)"/></td>
                <td><input class="adm-inp adm-num" value="${v(dpsV(row[4]))}" onchange="DATA.samsung['${grp}'][${i}][4]=undps(this.value)"/></td>
                <td><button class="adm-btn-del" onclick="admDelSamRow('${grp}',${i})">✕</button></td>
              </tr>`).join('')}
            </tbody>
          </table>
        </div>`;
      });
      html+=`<button class="adm-btn-new-card" onclick="admAddSamGroup()">+ New Group</button>`;
    }

    // ── APPLE WATCH — columns: Model, Sealed, Open, A/HSO, B ──
    if(id==='watch'){
      Object.entries(DATA.watch).forEach(([grp,rows])=>{
        html+=`<div class="adm-card">
          <div class="adm-card-hdr">
            <div class="adm-card-title">${grp}</div>
            <button class="adm-btn-add" onclick="admAddWatchRow('${grp}')">+ Add</button>
          </div>
          <table class="adm-tbl">
            <thead><tr><th>Model</th><th>Sealed</th><th>Open</th><th>A/HSO</th><th>B</th><th></th></tr></thead>
            <tbody>
              ${rows.map((row,i)=>`<tr>
                <td><input class="adm-inp" value="${v(row[0])}" onchange="DATA.watch['${grp}'][${i}][0]=this.value"/></td>
                ${[1,2,3,4].map(ci=>`<td><input class="adm-inp adm-num" value="${v(dpV(row[ci]))}" onchange="DATA.watch['${grp}'][${i}][${ci}]=undp(this.value)"/></td>`).join('')}
                <td><button class="adm-btn-del" onclick="admDelWatchRow('${grp}',${i})">✕</button></td>
              </tr>`).join('')}
            </tbody>
          </table>
        </div>`;
      });
    }

    // ── AIRPODS — columns: Model, Price ──
    if(id==='airpods'){
      Object.entries(DATA.airpods).forEach(([grp,rows])=>{
        html+=`<div class="adm-card">
          <div class="adm-card-hdr">
            <div class="adm-card-title">${grp}</div>
            <button class="adm-btn-add" onclick="admAddAirRow('${grp}')">+ Add</button>
          </div>
          <table class="adm-tbl">
            <thead><tr><th>Model</th><th>Price</th><th></th></tr></thead>
            <tbody>
              ${rows.map((row,i)=>`<tr>
                <td><input class="adm-inp" value="${v(row[0])}" onchange="DATA.airpods['${grp}'][${i}][0]=this.value"/></td>
                <td><input class="adm-inp adm-num" value="${v(dpV(row[1]))}" onchange="DATA.airpods['${grp}'][${i}][1]=undp(this.value)"/></td>
                <td><button class="adm-btn-del" onclick="admDelAirRow('${grp}',${i})">✕</button></td>
              </tr>`).join('')}
            </tbody>
          </table>
        </div>`;
      });
    }

    // ── MERCURY SYNC (paste-based) ──
    if(id==='mercury-sync'){
      var bl=null;try{bl=JSON.parse(localStorage.getItem('m901_merc_paste'));}catch(e){}
      var lastTs='';try{lastTs=localStorage.getItem('m901_merc_paste_ts')||'';}catch(e){}
      html+=`<div class="adm-section-title">Mercury Price Sync</div>`;
      html+=`<div class="adm-card" style="margin-bottom:16px">
        <div class="adm-card-hdr"><div class="adm-card-title">How to use</div></div>
        <div style="padding:12px;color:var(--dim2);font-size:.8rem;line-height:1.6">
          <b>Step 1:</b> Open the Mercury Google Sheet tab (e.g. iPhones)<br>
          <b>Step 2:</b> Select all data (Ctrl+A / Cmd+A) and copy (Ctrl+C / Cmd+C)<br>
          <b>Step 3:</b> Select the matching tab below, paste into the box, click <b>"Save as Baseline"</b><br>
          <b>Step 4:</b> Next time prices change, paste the updated sheet and click <b>"Compare & Apply"</b><br>
          The system will find price differences and apply them to your website automatically.
        </div>
      </div>`;
      var tabs=['iphones','samsung','ipad','macbooks','watch','airpods'];
      var tabLabels=['iPhones','Samsung','iPad','MacBooks','Apple Watch','AirPods'];
      html+=`<div class="adm-card">
        <div class="adm-card-hdr"><div class="adm-card-title">Paste Sheet Data</div></div>
        <div style="padding:12px">
          <div style="margin-bottom:10px">
            <label style="color:var(--dim2);font-size:.75rem;margin-bottom:6px;display:block">Select Tab:</label>
            <select id="merc-tab-select" style="width:100%;padding:8px 12px;background:rgba(255,255,255,.05);border:1px solid var(--border);border-radius:8px;color:var(--white);font-size:.82rem">
              ${tabs.map((t,i)=>'<option value="'+t+'">'+tabLabels[i]+'</option>').join('')}
            </select>
          </div>
          <div style="margin-bottom:10px">
            <label style="color:var(--dim2);font-size:.75rem;margin-bottom:6px;display:block">Paste data here (copy from Google Sheet and paste):</label>
            <textarea id="merc-paste-area" style="width:100%;height:200px;background:rgba(255,255,255,.03);border:1px solid var(--border);border-radius:8px;color:var(--white);font-family:monospace;font-size:.72rem;padding:10px;resize:vertical" placeholder="Select all cells in the Mercury sheet tab, copy, and paste here..."></textarea>
          </div>
          <div style="display:flex;gap:10px;flex-wrap:wrap">
            <button onclick="mercSaveBaseline()" style="padding:8px 18px;background:rgba(59,130,246,.15);border:1px solid rgba(59,130,246,.3);border-radius:8px;color:#60a5fa;font-size:.78rem;cursor:pointer;font-weight:600">Save as Baseline</button>
            <button onclick="mercCompareApply()" style="padding:8px 18px;background:rgba(34,197,94,.15);border:1px solid rgba(34,197,94,.3);border-radius:8px;color:#4ade80;font-size:.78rem;cursor:pointer;font-weight:600">Compare & Apply</button>
            <button onclick="mercClearBaseline()" style="padding:8px 18px;background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.2);border-radius:8px;color:#f87171;font-size:.72rem;cursor:pointer">Clear Baseline</button>
          </div>
        </div>
      </div>`;
      // Show baseline status
      html+=`<div class="adm-card" style="margin-top:16px">
        <div class="adm-card-hdr"><div class="adm-card-title">Baseline Status</div></div>
        <div id="merc-status" style="padding:12px;color:var(--dim2);font-size:.78rem;line-height:1.6">`;
      if(bl){
        var savedTabs=Object.keys(bl);
        html+=`<span style="color:#4ade80">Baseline saved</span> — Tabs: <b>${savedTabs.join(', ')}</b><br>`;
        if(lastTs) html+=`Last updated: ${new Date(parseInt(lastTs)).toLocaleString()}<br>`;
        savedTabs.forEach(function(tn){
          var count=Object.keys(bl[tn]||{}).length;
          html+=tn+': '+count+' entries &nbsp; ';
        });
      } else {
        html+='<span style="color:#f87171">No baseline saved yet.</span> Paste a sheet tab and click "Save as Baseline" to start.';
      }
      html+=`</div></div>`;
      // Show last comparison results
      html+=`<div class="adm-card" style="margin-top:16px">
        <div class="adm-card-hdr"><div class="adm-card-title">Last Comparison Results</div></div>
        <div id="merc-results" style="padding:12px;color:var(--dim2);font-size:.78rem;max-height:300px;overflow-y:auto">
          No comparison run yet.
        </div>
      </div>`;
    }

    return html;
  }

  // ── MERCURY PASTE SYNC LOGIC ──
  var MERC_BL_KEY='m901_merc_paste';
  var MERC_TS_KEY='m901_merc_paste_ts';

  function mercParseTSV(text){
    return text.split('\n').map(function(line){return line.split('\t').map(function(c){return c.trim();});}).filter(function(r){return r.length>1||r[0]!=='';});
  }

  function mercPN(v){
    if(!v||v==='ASK'||v==='NOT BUYING'||v==='-'||v==='') return null;
    var n=parseFloat(String(v).replace(/[,$\s]/g,''));
    return isNaN(n)?null:n;
  }

  function mercIsJunk(s){
    if(!s) return false;
    var u=s.toUpperCase();
    return u.indexOf('BLUE')>-1||u.indexOf('BLACKLIST')>-1||u.indexOf('DEDUCTION')>-1||u.indexOf('CLICK')>-1||
      u.indexOf('MERCURY')>-1||u.indexOf('CONTACT')>-1||u.indexOf('LAS VEGAS')>-1||u.indexOf('314-')>-1||
      u.indexOf('NEW OPEN =')>-1||u.indexOf('OFFICIAL REPLACEMENT')>-1||u.indexOf('TRACFONE')>-1||
      u.indexOf('CRACK')>-1||u.indexOf('VIDEO')>-1||u.indexOf('JOIN')>-1||u.indexOf('MISSING')>-1||
      u.indexOf('KNOX')>-1||u.indexOf('IMEI')>-1||u==='MODEL';
  }

  // ── iPHONE PARSER (TSV: B=Model, C=Lock, D=Sealed, E=Open, H=A+, J=B, L=C, M=D, N=DOA) ──
  function mercParseIphones(rows){
    var result={};var curModel='';var curLock='';
    for(var i=0;i<rows.length;i++){
      var r=rows[i];if(!r||r.length<14) continue;
      var c1=(r[1]||'').trim(),c2=(r[2]||'').trim();
      if(!c1&&!c2) continue;
      if(mercIsJunk(c1)) continue;
      if(c2.toUpperCase()==='UNLOCKED'||c2.toUpperCase()==='CARRIER LOCK'){
        curLock=c2.toUpperCase()==='UNLOCKED'?'ul':'lk';curModel=c1;
      } else if(c1&&mercPN(r[3])!==null){curModel=c1;}
      var se=mercPN(r[3]),op=mercPN(r[4]),gA=mercPN(r[7]),gB=mercPN(r[9]),gC=mercPN(r[11]),gD=mercPN(r[12]),doa=mercPN(r[13]);
      if(se===null&&op===null&&gA===null&&gB===null) continue;
      var model=curModel.replace(/\s*\(T-mobile.*?\)/i,'').trim();
      if(!model) continue;
      result[model+'|'+curLock]={model:model,lock:curLock,sealed:se,open:op,grA:gA,grB:gB,grC:gC,grD:gD,doa:doa};
    }
    return result;
  }

  // ── SAMSUNG PARSER (TSV: A=Model, B=Lock, C=Sealed, D=A, E=B+, F=B/B-, G=C, H=D, I=DOA) ──
  function mercParseSamsung(rows){
    var result={};var curModel='';
    for(var i=0;i<rows.length;i++){
      var r=rows[i];if(!r||r.length<3) continue;
      var c0=(r[0]||'').trim(),c1=(r[1]||'').trim();
      if(!c0&&!c1) continue;
      if(c0&&mercIsJunk(c0)) continue;
      if(c0&&c0.toUpperCase().indexOf('HIGHER GB')>-1) continue;
      if(c0&&c0.toUpperCase().indexOf('SAMSUNG')>-1) continue;
      if(c0&&c0.toUpperCase().indexOf('GOOGLE LOCKED')>-1) continue;
      if(c0&&c0.toUpperCase().indexOf('IF ')===0) continue;
      var lockU=c1.toUpperCase();
      if(lockU==='UNLOCKED'||lockU==='AT&T'||lockU==='CARRIER LOCKED'||lockU==='LOCK CARRIER'){
        if(c0) curModel=c0;
        var lock=lockU==='UNLOCKED'?'Unlocked':(lockU==='AT&T'?'AT&T':'Carrier Locked');
        var se=mercPN(r[2]),gA=mercPN(r[3]),gBp=mercPN(r[4]);
        if(se===null&&gA===null&&gBp===null) continue;
        result[curModel.toUpperCase().replace(/\s+/g,' ')+'|'+lock]={model:curModel,lock:lock,sealed:se,grA:gA,grBp:gBp};
      } else if(c0&&!c1){curModel=c0;}
    }
    return result;
  }

  // ── iPAD PARSER (TSV: A=storage, B=Sealed, C=Open, D=GrA, E=GrB, F=GrC, G=GrD, H=DOA) ──
  function mercParseIpad(rows){
    var result={};var curGroup='';
    for(var i=0;i<rows.length;i++){
      var r=rows[i];if(!r||r.length<2) continue;
      var c0=(r[0]||'').trim();if(!c0) continue;
      var cu=c0.toUpperCase();
      if(cu.indexOf('IPAD')>-1){
        if(cu.indexOf('PRICING')>-1||cu.indexOf('MUST BE')>-1||cu.indexOf('VIDEO')>-1||cu.indexOf('ENGRAVING')>-1||cu.indexOf('JOIN')>-1||cu.indexOf('ACTIVATED')>-1||cu.indexOf('B GRADE')>-1) continue;
        curGroup=c0;continue;
      }
      if(cu.indexOf('GB')>-1||cu.indexOf('TB')>-1){
        var se=mercPN(r[1]),op=mercPN(r[2]),gA=mercPN(r[3]),gB=mercPN(r[4]),gC=mercPN(r[5]),gD=mercPN(r[6]),doa=mercPN(r[7]);
        if(se===null&&op===null&&gA===null) continue;
        result[curGroup+'|'+c0]={group:curGroup,storage:c0,sealed:se,open:op,grA:gA,grB:gB,grC:gC,grD:gD,doa:doa};
      }
    }
    return result;
  }

  // ── MACBOOK PARSER (TSV: A=SKU, B=Sealed, C=Open, D=SealedActive) ──
  function mercParseMacbooks(rows){
    var result={};var curGroup='';
    for(var i=0;i<rows.length;i++){
      var r=rows[i];if(!r||r.length<2) continue;
      var c0=(r[0]||'').trim();if(!c0) continue;
      var cu=c0.toUpperCase();
      if(cu.indexOf('MACBOOK')>-1){
        if(cu.indexOf('PRICING')>-1||cu.indexOf('OPEN BOX')>-1||cu.indexOf('PLASTIC')>-1||cu.indexOf('ACTIVATED')>-1) continue;
        curGroup=c0;continue;
      }
      var se=mercPN(r[1]),op=mercPN(r[2]);
      if(se===null&&op===null) continue;
      if(cu.indexOf('SEALED')>-1||cu==='OPEN / ACTIVE') continue;
      result[curGroup+'|'+c0]={group:curGroup,sku:c0,sealed:se,open:op};
    }
    return result;
  }

  // ── WATCH PARSER (TSV: A=model, B=Sealed, C=Open, D=HSO, E=B) ──
  function mercParseWatch(rows){
    var result={};var curGroup='';
    for(var i=0;i<rows.length;i++){
      var r=rows[i];if(!r||r.length<2) continue;
      var c0=(r[0]||'').trim();if(!c0) continue;
      var cu=c0.toUpperCase();
      if(cu.indexOf('APPLE WATCH')>-1||cu.indexOf('USED -')>-1||cu.indexOf('NO BAND')>-1||cu.indexOf("CAN'T BE")>-1) continue;
      var c1=(r[1]||'').trim().toUpperCase();
      if(c1==='SEALED'){curGroup=c0;continue;}
      var se=mercPN(r[1]),op=mercPN(r[2]),hso=mercPN(r[3]),gB=mercPN(r[4]);
      if(se===null&&op===null&&hso===null&&gB===null) continue;
      result[c0]={model:c0,group:curGroup,sealed:se,open:op,hso:hso,grB:gB};
    }
    return result;
  }

  // ── AIRPODS PARSER (TSV from Misc: A=model, B=sealed, C=opened) ──
  function mercParseAirpods(rows){
    var result={};var inAirpods=false;
    for(var i=0;i<rows.length;i++){
      var r=rows[i];if(!r||r.length<2) continue;
      var c0=(r[0]||'').trim();var cu=c0.toUpperCase();
      if(cu==='APPLE AIRPOD'||cu==='APPLE AIRPODS'){inAirpods=true;continue;}
      if(inAirpods&&(cu==='APPLE AIRTAG'||cu==='APPLE HOMEPOD'||cu==='APPLE MOUSE')){inAirpods=false;continue;}
      if(inAirpods&&cu==='') continue;
      if(!inAirpods) continue;
      var se=mercPN(r[1]);
      if(se===null) continue;
      result[c0]={model:c0,sealed:se};
    }
    return result;
  }

  function mercGetParser(tab){
    switch(tab){
      case 'iphones': return mercParseIphones;
      case 'samsung': return mercParseSamsung;
      case 'ipad':    return mercParseIpad;
      case 'macbooks':return mercParseMacbooks;
      case 'watch':   return mercParseWatch;
      case 'airpods': return mercParseAirpods;
    }
    return null;
  }

  // ── SAVE BASELINE ──
  window.mercSaveBaseline=function(){
    var tab=document.getElementById('merc-tab-select').value;
    var text=document.getElementById('merc-paste-area').value.trim();
    if(!text){toast('Paste sheet data first!','err');return;}
    var rows=mercParseTSV(text);
    var parser=mercGetParser(tab);
    if(!parser){toast('Unknown tab','err');return;}
    var parsed=parser(rows);
    var count=Object.keys(parsed).length;
    if(count===0){toast('No data found. Make sure you copied the right tab.','err');return;}
    var bl={};try{bl=JSON.parse(localStorage.getItem(MERC_BL_KEY))||{};}catch(e){bl={};}
    bl[tab]=parsed;
    localStorage.setItem(MERC_BL_KEY,JSON.stringify(bl));
    localStorage.setItem(MERC_TS_KEY,Date.now().toString());
    toast(tab+' baseline saved: '+count+' entries','ok');
    admShowSection('mercury-sync');
  };

  // ── CLEAR BASELINE ──
  window.mercClearBaseline=function(){
    if(!confirm('Clear all saved baselines?')) return;
    localStorage.removeItem(MERC_BL_KEY);
    localStorage.removeItem(MERC_TS_KEY);
    toast('Baselines cleared','ok');
    admShowSection('mercury-sync');
  };

  // ── COMPARE & APPLY ──
  window.mercCompareApply=function(){
    var tab=document.getElementById('merc-tab-select').value;
    var text=document.getElementById('merc-paste-area').value.trim();
    if(!text){toast('Paste updated sheet data first!','err');return;}
    var bl={};try{bl=JSON.parse(localStorage.getItem(MERC_BL_KEY))||{};}catch(e){bl={};}
    if(!bl[tab]){toast('No baseline for '+tab+'. Save a baseline first!','err');return;}
    var rows=mercParseTSV(text);
    var parser=mercGetParser(tab);
    var newData=parser(rows);
    var baseline=bl[tab];
    var changes=[];
    var changed=false;

    // Compare and apply diffs per category
    if(tab==='iphones') changed=mercApplyIphones(newData,baseline,changes);
    if(tab==='samsung') changed=mercApplySamsung(newData,baseline,changes);
    if(tab==='ipad')    changed=mercApplyIpad(newData,baseline,changes);
    if(tab==='macbooks') changed=mercApplyMacbooks(newData,baseline,changes);
    if(tab==='watch')   changed=mercApplyWatch(newData,baseline,changes);
    if(tab==='airpods') changed=mercApplyAirpods(newData,baseline,changes);

    // Update baseline to new data
    bl[tab]=newData;
    localStorage.setItem(MERC_BL_KEY,JSON.stringify(bl));
    localStorage.setItem(MERC_TS_KEY,Date.now().toString());

    // Show results
    var resDiv=document.getElementById('merc-results');
    if(changes.length>0){
      resDiv.innerHTML='<div style="color:#4ade80;font-weight:600;margin-bottom:8px">'+changes.length+' price change(s) applied:</div>'+
        changes.map(function(c){return '<div style="padding:3px 0;border-bottom:1px solid var(--border)">'+c+'</div>';}).join('');
      if(typeof renderAll==='function') renderAll();
      if(typeof saveData==='function') saveData();
      toast(changes.length+' prices updated!','ok');
    } else {
      resDiv.innerHTML='<span style="color:var(--dim2)">No price changes detected between baseline and new data.</span>';
      toast('No changes detected','ok');
    }
  };

  // ── DIFF HELPER ──
  function mercDiff(cur,base){
    if(cur!==null&&base!==null) return cur-base;
    return 0;
  }

  // ── APPLY iPHONE DIFFS ──
  function mercApplyIphones(newD,baseD,log){
    var changed=false;
    var normM=function(m){return m.toUpperCase().replace(/\s+/g,' ').replace('PRO MAX','PM').replace('PRO','P').replace('PLUS','+').replace(/\s/g,'').replace(/G$/,'');};
    Object.keys(newD).forEach(function(mk){
      var m=newD[mk],b=baseD[mk];if(!b) return;
      // New phone diffs (sealed, open)
      var dSealed=mercDiff(m.sealed,b.sealed),dOpen=mercDiff(m.open,b.open);
      if(dSealed!==0||dOpen!==0){
        var mn=normM(m.model);
        Object.entries(DATA.newPhone).forEach(function(e){
          var d=e[1];if(d.tp!==m.lock) return;
          var dn=normM(d.t);
          if(dn.indexOf(mn.replace(/\d+[GTB]$/,''))>-1||mn.indexOf(dn.replace(/\d+[GTB]$/,''))>-1){
            d.r.forEach(function(row){
              var rs=(row[0]||'').toUpperCase().replace(/\s/g,'');
              var ms=m.model.match(/(\d+)\s*(?:GB?|TB?)/i);
              if(ms){var sz=ms[0].toUpperCase().replace(/\s/g,'');if(sz.match(/\d+G$/))sz+='B';if(sz.match(/\d+T$/))sz+='B';
                if(rs.indexOf(sz)>-1){
                  if(dSealed!==0){row[1]=(row[1]||0)+dSealed;changed=true;log.push(m.model+' '+m.lock+' Sealed: '+(dSealed>0?'+':'')+dSealed);}
                  if(dOpen!==0){row[2]=(row[2]||0)+dOpen;changed=true;log.push(m.model+' '+m.lock+' Open: '+(dOpen>0?'+':'')+dOpen);}
                }
              }
            });
          }
        });
      }
      // Used phone diffs (grades)
      var dA=mercDiff(m.grA,b.grA),dB=mercDiff(m.grB,b.grB),dC=mercDiff(m.grC,b.grC),dD=mercDiff(m.grD,b.grD),dDOA=mercDiff(m.doa,b.doa);
      if(dA!==0||dB!==0||dC!==0||dD!==0||dDOA!==0){
        var mn2=normM(m.model);
        Object.entries(DATA.usedPhone).forEach(function(e){
          var d=e[1];if(d.tp!==m.lock) return;
          var dn=normM(d.t);
          if(dn.indexOf(mn2.replace(/\d+[GTB]$/,''))>-1||mn2.indexOf(dn.replace(/\d+[GTB]$/,''))>-1){
            d.r.forEach(function(row){
              var rs=(row[0]||'').toUpperCase().replace(/\s/g,'');
              var ms=m.model.match(/(\d+)\s*(?:GB?|TB?)/i);
              if(ms){var sz=ms[0].toUpperCase().replace(/\s/g,'');if(sz.match(/\d+G$/))sz+='B';if(sz.match(/\d+T$/))sz+='B';
                if(rs.indexOf(sz)>-1){
                  if(dA!==0){row[1]=(row[1]||0)+dA;changed=true;log.push(m.model+' '+m.lock+' HSO: '+(dA>0?'+':'')+dA);}
                  if(dB!==0){row[2]=(row[2]||0)+dB;changed=true;log.push(m.model+' '+m.lock+' B: '+(dB>0?'+':'')+dB);}
                  if(dC!==0){row[3]=(row[3]||0)+dC;changed=true;log.push(m.model+' '+m.lock+' C: '+(dC>0?'+':'')+dC);}
                  if(dD!==0){row[4]=(row[4]||0)+dD;changed=true;log.push(m.model+' '+m.lock+' D: '+(dD>0?'+':'')+dD);}
                  if(dDOA!==0){row[5]=(row[5]||0)+dDOA;changed=true;log.push(m.model+' '+m.lock+' DOA: '+(dDOA>0?'+':'')+dDOA);}
                }
              }
            });
          }
        });
      }
    });
    return changed;
  }

  // ── APPLY SAMSUNG DIFFS ──
  function mercApplySamsung(newD,baseD,log){
    var changed=false;
    Object.keys(newD).forEach(function(mk){
      var m=newD[mk],b=baseD[mk];if(!b) return;
      var dSe=mercDiff(m.sealed,b.sealed),dA=mercDiff(m.grA,b.grA),dBp=mercDiff(m.grBp,b.grBp);
      if(dSe===0&&dA===0&&dBp===0) return;
      var mName=m.model.toUpperCase().replace(/\s+/g,' ');
      Object.keys(DATA.samsung).forEach(function(grp){
        DATA.samsung[grp].forEach(function(row){
          var rName=row[0].toUpperCase().replace(/\s+/g,' ');
          if(rName.indexOf(mName)>-1||mName.indexOf(rName)>-1){
            if((m.lock==='Unlocked'&&row[1]==='Unlocked')||(m.lock==='AT&T'&&row[1]==='AT&T')||(m.lock==='Carrier Locked'&&row[1]==='Carrier Locked')){
              if(dSe!==0&&row[2]!==null){row[2]+=dSe;changed=true;log.push(m.model+' '+m.lock+' Sealed: '+(dSe>0?'+':'')+dSe);}
              if(dA!==0&&row[3]!==null){row[3]+=dA;changed=true;log.push(m.model+' '+m.lock+' A: '+(dA>0?'+':'')+dA);}
              if(dBp!==0&&row[4]!==null){row[4]+=dBp;changed=true;log.push(m.model+' '+m.lock+' B: '+(dBp>0?'+':'')+dBp);}
            }
          }
        });
      });
    });
    return changed;
  }

  // ── APPLY iPAD DIFFS ──
  function mercApplyIpad(newD,baseD,log){
    var changed=false;
    Object.keys(newD).forEach(function(mk){
      var m=newD[mk],b=baseD[mk];if(!b) return;
      var dSe=mercDiff(m.sealed,b.sealed),dOp=mercDiff(m.open,b.open);
      var dA=mercDiff(m.grA,b.grA),dB=mercDiff(m.grB,b.grB),dC=mercDiff(m.grC,b.grC),dD=mercDiff(m.grD,b.grD);
      if(dSe===0&&dOp===0&&dA===0&&dB===0&&dC===0&&dD===0) return;
      var grp=m.group.toUpperCase();var stor=m.storage.toUpperCase();
      var isCell=stor.indexOf('CELLULAR')>-1,isWifi=stor.indexOf('WI-FI')>-1||stor.indexOf('WIFI')>-1,isVerizon=stor.indexOf('VERIZON')>-1;
      // New iPad
      if(dSe!==0||dOp!==0){
        Object.entries(DATA.newIpad).forEach(function(e){
          var dd=e[1];var dt=dd.t.toUpperCase();
          var match=false;
          if(grp.indexOf('PRO 13')>-1&&dt.indexOf('PRO 13')>-1) match=true;
          if(grp.indexOf('PRO 11')>-1&&dt.indexOf('PRO 11')>-1) match=true;
          if(grp.indexOf('AIR 13')>-1&&dt.indexOf('AIR 13')>-1) match=true;
          if(grp.indexOf('AIR 11')>-1&&dt.indexOf('AIR 11')>-1) match=true;
          if(!match) return;
          if(grp.indexOf('M5')>-1&&dt.indexOf('M5')<0) return;
          if(grp.indexOf('M4')>-1&&dt.indexOf('M4')<0) return;
          if(grp.indexOf('M3')>-1&&dt.indexOf('M3')<0) return;
          if((isCell&&!isVerizon&&dd.tp==='cell')||(isWifi&&dd.tp==='wifi')){
            dd.r.forEach(function(row){
              if((row[0]||'').toUpperCase().replace(/\s/g,'').indexOf(stor.replace(/\s/g,'').replace(/CELLULAR|WI-FI|WIFI|VERIZON/g,'').replace(/^\s+|\s+$/g,''))>-1){
                if(dSe!==0){row[1]=(row[1]||0)+dSe;changed=true;log.push('iPad '+m.group+' '+m.storage+' Sealed: '+(dSe>0?'+':'')+dSe);}
                if(dOp!==0){row[2]=(row[2]||0)+dOp;changed=true;log.push('iPad '+m.group+' '+m.storage+' Open: '+(dOp>0?'+':'')+dOp);}
              }
            });
          }
        });
      }
      // Used iPad
      if(dA!==0||dB!==0||dC!==0||dD!==0){
        Object.entries(DATA.usedIpad).forEach(function(e){
          var dd=e[1];var dt=dd.t.toUpperCase();
          var match=false;
          if(grp.indexOf('PRO 13')>-1&&dt.indexOf('PRO 13')>-1) match=true;
          if(grp.indexOf('PRO 11')>-1&&dt.indexOf('PRO 11')>-1) match=true;
          if(grp.indexOf('AIR 13')>-1&&dt.indexOf('AIR 13')>-1) match=true;
          if(grp.indexOf('AIR 11')>-1&&dt.indexOf('AIR 11')>-1) match=true;
          if(!match) return;
          if(grp.indexOf('M4')>-1&&dt.indexOf('M4')<0) return;
          if(grp.indexOf('M3')>-1&&dt.indexOf('M3')<0) return;
          if((isCell&&!isVerizon&&dd.tp==='cell')||(isWifi&&dd.tp==='wifi')){
            dd.r.forEach(function(row){
              var rs=(row[0]||'').toUpperCase().replace(/\s/g,'');
              var stClean=stor.replace(/\s/g,'').replace(/CELLULAR|WI-FI|WIFI|VERIZON/g,'');
              if(rs.indexOf(stClean)>-1){
                if(dA!==0){row[1]=(row[1]||0)+dA;changed=true;log.push('iPad '+m.storage+' HSO: '+(dA>0?'+':'')+dA);}
                if(dB!==0){row[2]=(row[2]||0)+dB;changed=true;log.push('iPad '+m.storage+' B: '+(dB>0?'+':'')+dB);}
                if(dC!==0){row[3]=(row[3]||0)+dC;changed=true;log.push('iPad '+m.storage+' C: '+(dC>0?'+':'')+dC);}
                if(dD!==0){row[4]=(row[4]||0)+dD;changed=true;log.push('iPad '+m.storage+' D: '+(dD>0?'+':'')+dD);}
              }
            });
          }
        });
      }
    });
    return changed;
  }

  // ── APPLY MACBOOK DIFFS ──
  function mercApplyMacbooks(newD,baseD,log){
    var changed=false;
    Object.keys(newD).forEach(function(mk){
      var m=newD[mk],b=baseD[mk];if(!b) return;
      var dSe=mercDiff(m.sealed,b.sealed),dOp=mercDiff(m.open,b.open);
      if(dSe===0&&dOp===0) return;
      var mGrp=m.group.toUpperCase();var mSku=m.sku.toUpperCase();
      Object.entries(DATA.macbook).forEach(function(e){
        var dd=e[1];var dt=dd.t.toUpperCase();
        var gm=false;
        if(mGrp.indexOf('PRO 14')>-1&&mGrp.indexOf('M5')>-1&&dt.indexOf('PRO 14')>-1&&dt.indexOf('M5')>-1) gm=true;
        if(mGrp.indexOf('PRO 14')>-1&&mGrp.indexOf('M4')>-1&&dt.indexOf('PRO 14')>-1&&dt.indexOf('M4')>-1) gm=true;
        if(mGrp.indexOf('PRO 16')>-1&&mGrp.indexOf('M4')>-1&&dt.indexOf('PRO 16')>-1&&dt.indexOf('M4')>-1) gm=true;
        if(mGrp.indexOf('AIR 13')>-1&&mGrp.indexOf('M4')>-1&&dt.indexOf('AIR 13')>-1&&dt.indexOf('M4')>-1) gm=true;
        if(mGrp.indexOf('AIR 15')>-1&&mGrp.indexOf('M4')>-1&&dt.indexOf('AIR 15')>-1&&dt.indexOf('M4')>-1) gm=true;
        if(mGrp.indexOf('AIR 13')>-1&&mGrp.indexOf('M3')>-1&&dt.indexOf('AIR 13')>-1&&dt.indexOf('M3')>-1) gm=true;
        if(mGrp.indexOf('AIR 15')>-1&&mGrp.indexOf('M3')>-1&&dt.indexOf('AIR 15')>-1&&dt.indexOf('M3')>-1) gm=true;
        if(!gm) return;
        dd.r.forEach(function(row){
          var rl=row[0].toUpperCase();
          var parts=mSku.split(/\s+/);
          var skuM=false;
          for(var p=0;p<parts.length;p++){if(parts[p].length>4&&rl.indexOf(parts[p])>-1){skuM=true;break;}}
          if(!skuM){var ms=mSku.match(/(\d+)\s*(?:GB|TB)/i);var rs=rl.match(/(\d+)\s*(?:GB|TB)/i);if(ms&&rs&&ms[0].toUpperCase()===rs[0].toUpperCase()) skuM=true;}
          if(skuM){
            if(dSe!==0){row[1]=(row[1]||0)+dSe;changed=true;log.push('MacBook '+m.sku+' Sealed: '+(dSe>0?'+':'')+dSe);}
            if(dOp!==0){row[2]=(row[2]||0)+dOp;changed=true;log.push('MacBook '+m.sku+' Open: '+(dOp>0?'+':'')+dOp);}
          }
        });
      });
    });
    return changed;
  }

  // ── APPLY WATCH DIFFS ──
  function mercApplyWatch(newD,baseD,log){
    var changed=false;
    Object.keys(newD).forEach(function(mk){
      var m=newD[mk],b=baseD[mk];if(!b) return;
      var dSe=mercDiff(m.sealed,b.sealed),dOp=mercDiff(m.open,b.open),dH=mercDiff(m.hso,b.hso),dB=mercDiff(m.grB,b.grB);
      if(dSe===0&&dOp===0&&dH===0&&dB===0) return;
      var mN=m.model.toUpperCase();
      Object.keys(DATA.watch).forEach(function(grp){
        DATA.watch[grp].forEach(function(row){
          var rN=row[0].toUpperCase();
          var mmM=mN.match(/(\d+)\s*MM/i),rmM=rN.match(/(\d+)\s*MM/i);
          var sameSize=mmM&&rmM&&mmM[1]===rmM[1];
          var sameSeries=false;
          if(mN.indexOf('ULTRA 3')>-1&&rN.indexOf('ULTRA 3')>-1) sameSeries=true;
          if(mN.indexOf('ULTRA')>-1&&mN.indexOf('GEN 2')>-1&&rN.indexOf('ULTRA 2')>-1) sameSeries=true;
          if(mN.indexOf('SERIES 11')>-1&&rN.indexOf('SERIES 11')>-1) sameSeries=true;
          if(mN.indexOf('SERIES 10')>-1&&rN.indexOf('SERIES 10')>-1) sameSeries=true;
          if(mN.indexOf('SERIES 9')>-1&&rN.indexOf('SERIES 9')>-1) sameSeries=true;
          if(mN.indexOf('SE (3')>-1&&rN.indexOf('SE 3')>-1) sameSeries=true;
          if(mN.indexOf('SE (2')>-1&&rN.indexOf('SE 2')>-1) sameSeries=true;
          if(mN.indexOf('SERIES 8')>-1&&rN.indexOf('SERIES 8')>-1) sameSeries=true;
          if(sameSeries&&sameSize){
            if(dSe!==0){row[1]=(row[1]||0)+dSe;changed=true;log.push('Watch '+m.model+' Sealed: '+(dSe>0?'+':'')+dSe);}
            if(dOp!==0){row[2]=(row[2]||0)+dOp;changed=true;log.push('Watch '+m.model+' Open: '+(dOp>0?'+':'')+dOp);}
            if(dH!==0){row[3]=(row[3]||0)+dH;changed=true;log.push('Watch '+m.model+' HSO: '+(dH>0?'+':'')+dH);}
            if(dB!==0){row[4]=(row[4]||0)+dB;changed=true;log.push('Watch '+m.model+' B: '+(dB>0?'+':'')+dB);}
          }
        });
      });
    });
    return changed;
  }

  // ── APPLY AIRPODS DIFFS ──
  function mercApplyAirpods(newD,baseD,log){
    var changed=false;
    Object.keys(newD).forEach(function(mk){
      var m=newD[mk],b=baseD[mk];if(!b) return;
      var dSe=mercDiff(m.sealed,b.sealed);
      if(dSe===0) return;
      var mN=m.model.toUpperCase();
      Object.keys(DATA.airpods).forEach(function(grp){
        DATA.airpods[grp].forEach(function(row){
          var rN=row[0].toUpperCase();
          var skuM=mN.match(/[A-Z]{3,5}\d{1,2}[A-Z]{0,2}/);
          var rSkuM=rN.match(/[A-Z]{3,5}\d{1,2}[A-Z]{0,2}/);
          if(skuM&&rSkuM&&skuM[0]===rSkuM[0]){
            if(dSe!==0){row[1]=(row[1]||0)+dSe;changed=true;log.push('AirPods '+m.model+' Sealed: '+(dSe>0?'+':'')+dSe);}
          }
        });
      });
    });
    return changed;
  }

  // ── ROW ACTIONS ──
  // Helper to find the current active section id
  function currentSectionFor(ds,tp){
    if(tp) return ds+'-'+tp;
    return ds;
  }

  window.admAddRow=function(ds,key){
    const tp=DATA[ds][key].tp||null;
    if(['newPhone','newIpad','macbook'].includes(ds)) DATA[ds][key].r.push(['New Entry',null,null]);
    else if(ds==='usedPhone') DATA.usedPhone[key].r.push(['New Entry',null,null,null,null,null]);
    else if(ds==='usedIpad') DATA.usedIpad[key].r.push(['New Entry',null,null,null,null,null]);
    admShowSection(currentSectionFor(ds,tp));
  };
  window.admDelRow=function(ds,key,i){
    const tp=DATA[ds][key].tp||null;
    DATA[ds][key].r.splice(i,1);
    admShowSection(currentSectionFor(ds,tp));
  };
  window.admAddSamRow=function(grp){ DATA.samsung[grp].push(['New Model','Unlocked',null,null,null]); admShowSection('samsung'); };
  window.admDelSamRow=function(grp,i){ DATA.samsung[grp].splice(i,1); admShowSection('samsung'); };
  window.admAddWatchRow=function(grp){ DATA.watch[grp].push(['New Model',null,null,null,null]); admShowSection('watch'); };
  window.admDelWatchRow=function(grp,i){ DATA.watch[grp].splice(i,1); admShowSection('watch'); };
  window.admAddAirRow=function(grp){ DATA.airpods[grp].push(['New Model',null]); admShowSection('airpods'); };
  window.admDelAirRow=function(grp,i){ DATA.airpods[grp].splice(i,1); admShowSection('airpods'); };
  window.admAddCard=function(ds,tp){
    const name=prompt('Card name (e.g. iPhone 17 Pro Max):');
    if(!name) return;
    const key='new_'+Date.now();
    if(ds==='newPhone') DATA.newPhone[key]={t:name,tp:tp||'ul',r:[]};
    else if(ds==='usedPhone') DATA.usedPhone[key]={t:name,tp:tp||'ul',r:[]};
    else if(ds==='newIpad') DATA.newIpad[key]={t:name,tp:'ul',r:[]};
    else if(ds==='usedIpad') DATA.usedIpad[key]={t:name,tp:'ul',r:[]};
    else if(ds==='macbook') DATA.macbook[key]={t:name,r:[]};
    admShowSection(currentSectionFor(ds,tp));
  };
  window.admAddSamGroup=function(){
    const name=prompt('Group name (e.g. S20 Series):');
    if(!name) return;
    DATA.samsung[name]=[];
    admShowSection('samsung');
  };

  window.admSave=function(){
    saveData();
    admRenderNav();
    admRenderStats();
    const btn=document.getElementById('adm-save-btn');
    btn.innerHTML='<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg> Saved!';
    btn.style.background='rgba(34,197,94,.2)';btn.style.borderColor='#4ade80';btn.style.color='#4ade80';
    setTimeout(()=>{btn.innerHTML='<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg> Save All';btn.style.background='';btn.style.borderColor='';btn.style.color='';},2500);
  };

  window.admResetAll=function(){
    if(confirm('Reset ALL data to defaults? This cannot be undone.')){
      try{localStorage.removeItem(STORE_KEY);}catch(e){}
      location.reload();
    }
  };

  // allow Enter key on password
  document.addEventListener('DOMContentLoaded', function(){
    const pi = document.getElementById('adm-pass-input');
    if(pi) pi.addEventListener('keydown',function(e){
      if(e.key==='Enter') adminLogin();
    });
  });

  // ── ADMIN KEYBOARD SHORTCUTS ──
  document.addEventListener('keydown',function(e){
    // Ctrl+S / Cmd+S to save in admin
    if((e.ctrlKey||e.metaKey)&&e.key==='s'){
      const panel=document.getElementById('adm-panel');
      if(panel&&panel.style.display==='flex'){
        e.preventDefault();
        admSave();
      }
    }
    // Escape to close admin
    if(e.key==='Escape'){
      const overlay=document.getElementById('adm-overlay');
      if(overlay&&overlay.style.display!=='none'){
        adminLogout();
      }
    }
    // Ctrl+/ to focus search
    if((e.ctrlKey||e.metaKey)&&e.key==='/'){
      e.preventDefault();
      const searchInput=document.getElementById('global-search');
      if(searchInput){searchInput.focus();searchInput.select();}
    }
  });

})();

// ── COPY PRICE ON CLICK ──
(function(){
  document.addEventListener('click',function(e){
    const prEl=e.target.closest('.pr,.pr2');
    if(!prEl) return;
    const text=prEl.textContent.trim();
    if(!text||text==='—') return;
    if(navigator.clipboard){
      navigator.clipboard.writeText(text).then(()=>toast('Copied '+text,'ok')).catch(()=>{});
    }
  });
})();

// ── GRADE TOOLTIPS ──
(function(){
  const gradeInfo={
    'HSO':'Hospital Stock Overrun — New, never activated, swapped from Apple. Must have plastic & N model number.',
    'A':'Grade A — Fully functional, perfect condition. No dents, scratches, or marks.',
    'B+':'Grade B+ — Fully functional with very minor cosmetic wear.',
    'B':'Grade B — Fully functional, minor dents or light scratches present.',
    'C':'Grade C — Fully functional, heavy dents/scratches, cracked glass OK if LCD is good.',
    'D':'Grade D — Fully functional, heavy wear, LCD lines/spots allowed (no blackout).',
    'DOA':'Dead On Arrival — No power or major issues. No missing parts allowed.',
    'Grade A':'Grade A — Like new condition, fully functional, minimal wear.',
    'Grade B':'Grade B — Fully functional with moderate cosmetic wear.',
  };

  // Create tooltip element
  const tip=document.createElement('div');
  tip.id='grade-tip';
  tip.style.cssText='position:fixed;background:#1e293b;border:1px solid rgba(59,130,246,.3);border-radius:10px;padding:10px 14px;font-size:.75rem;color:#e2e8f0;max-width:280px;line-height:1.5;box-shadow:0 8px 30px rgba(0,0,0,.5);z-index:9000;pointer-events:none;opacity:0;transition:opacity .15s;';
  document.body.appendChild(tip);

  document.addEventListener('mouseover',function(e){
    const gp=e.target.closest('.gp');
    if(!gp) return;
    const label=gp.textContent.trim();
    const info=gradeInfo[label];
    if(!info) return;
    tip.textContent=info;
    tip.style.opacity='1';
    const rect=gp.getBoundingClientRect();
    tip.style.left=Math.min(rect.left,window.innerWidth-290)+'px';
    tip.style.top=(rect.bottom+8)+'px';
  });
  document.addEventListener('mouseout',function(e){
    if(e.target.closest('.gp')){tip.style.opacity='0';}
  });
})();


// ── DEVICE COUNT STATS (show counts in tabs) ──
(function(){
  function updateCounts(){
    const counts={
      iphones:Object.keys(DATA.newPhone).length+Object.keys(DATA.usedPhone).length,
      ipads:Object.keys(DATA.newIpad).length+Object.keys(DATA.usedIpad).length,
      macbooks:Object.keys(DATA.macbook).length,
      samsung:Object.values(DATA.samsung).reduce((s,r)=>s+r.length,0),
      watches:Object.values(DATA.watch).reduce((s,r)=>s+r.length,0)+Object.values(DATA.airpods).reduce((s,r)=>s+r.length,0),
    };
    // Don't add counts to tabs to keep them clean — but use them in search
    window._deviceCounts=counts;
  }
  updateCounts();
})();

// ── QUOTE POPUP (shows after 60 seconds) ──
(function(){
  var QUOTE_DELAY=60000;
  var shown=sessionStorage.getItem('m901_quote_shown');
  if(shown) return;
  setTimeout(function(){
    var ov=document.getElementById('quote-popup-overlay');
    if(!ov) return;
    ov.style.display='flex';
    requestAnimationFrame(function(){ov.classList.add('show');});
    sessionStorage.setItem('m901_quote_shown','1');
  },QUOTE_DELAY);
})();
window.closeQuotePopup=function(){
  var ov=document.getElementById('quote-popup-overlay');
  if(ov){ov.classList.remove('show');setTimeout(function(){ov.style.display='none';},300);}
};
document.addEventListener('click',function(e){
  if(e.target&&e.target.id==='quote-popup-overlay') closeQuotePopup();
});


</script>
</body>
</html>
